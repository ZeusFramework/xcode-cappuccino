<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Cappuccino: Foundation/CPURL.j Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>Foundation/CPURL.j</h1><a href="_c_p_u_r_l_8j.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 @<span class="keyword">import</span> &lt;Foundation/<a class="code" href="class_c_p_object.html" title="The root class from which most classes are subclassed.">CPObject</a>.j&gt;
<a name="l00003"></a>00003 
<a name="l00004"></a><a class="code" href="_c_p_u_r_l_8j.html#a810db6ec6b506aefe6c68741bc5e9e60">00004</a> <a class="code" href="_c_p_u_r_l_8j.html#a810db6ec6b506aefe6c68741bc5e9e60">CPURLNameKey</a>                        = <span class="stringliteral">@&quot;CPURLNameKey&quot;</span>;
<a name="l00005"></a><a class="code" href="_c_p_u_r_l_8j.html#a6a7712a03f89a8a7dce2e485f1c382cb">00005</a> <a class="code" href="_c_p_u_r_l_8j.html#a6a7712a03f89a8a7dce2e485f1c382cb">CPURLLocalizedNameKey</a>               = <span class="stringliteral">@&quot;CPURLLocalizedNameKey&quot;</span>;
<a name="l00006"></a><a class="code" href="_c_p_u_r_l_8j.html#aa8f58d74f3456a25f784247e32ad6da5">00006</a> <a class="code" href="_c_p_u_r_l_8j.html#aa8f58d74f3456a25f784247e32ad6da5">CPURLIsRegularFileKey</a>               = <span class="stringliteral">@&quot;CPURLIsRegularFileKey&quot;</span>;
<a name="l00007"></a><a class="code" href="_c_p_u_r_l_8j.html#ac4b77adbefd4db8b9007d6b308350633">00007</a> <a class="code" href="_c_p_u_r_l_8j.html#ac4b77adbefd4db8b9007d6b308350633">CPURLIsDirectoryKey</a>                 = <span class="stringliteral">@&quot;CPURLIsDirectoryKey&quot;</span>;
<a name="l00008"></a><a class="code" href="_c_p_u_r_l_8j.html#ae36f481086acc4ad1671d82fd852724b">00008</a> <a class="code" href="_c_p_u_r_l_8j.html#ae36f481086acc4ad1671d82fd852724b">CPURLIsSymbolicLinkKey</a>              = <span class="stringliteral">@&quot;CPURLIsSymbolicLinkKey&quot;</span>;
<a name="l00009"></a><a class="code" href="_c_p_u_r_l_8j.html#ad98518bc1f00423805842017fac56fcb">00009</a> <a class="code" href="_c_p_u_r_l_8j.html#ad98518bc1f00423805842017fac56fcb">CPURLIsVolumeKey</a>                    = <span class="stringliteral">@&quot;CPURLIsVolumeKey&quot;</span>;
<a name="l00010"></a><a class="code" href="_c_p_u_r_l_8j.html#a0103799f284b1880eb9ec630564a509c">00010</a> <a class="code" href="_c_p_u_r_l_8j.html#a0103799f284b1880eb9ec630564a509c">CPURLIsPackageKey</a>                   = <span class="stringliteral">@&quot;CPURLIsPackageKey&quot;</span>;
<a name="l00011"></a><a class="code" href="_c_p_u_r_l_8j.html#a2f3bbda88a0d649161e875c79a749a32">00011</a> <a class="code" href="_c_p_u_r_l_8j.html#a2f3bbda88a0d649161e875c79a749a32">CPURLIsSystemImmutableKey</a>           = <span class="stringliteral">@&quot;CPURLIsSystemImmutableKey&quot;</span>;
<a name="l00012"></a><a class="code" href="_c_p_u_r_l_8j.html#a590678ae3d75adfdee0cdcb8d61c3b09">00012</a> <a class="code" href="_c_p_u_r_l_8j.html#a590678ae3d75adfdee0cdcb8d61c3b09">CPURLIsUserImmutableKey</a>             = <span class="stringliteral">@&quot;CPURLIsUserImmutableKey&quot;</span>;
<a name="l00013"></a><a class="code" href="_c_p_u_r_l_8j.html#a4e4c937f84da7e9cc08e5bdb40e5051a">00013</a> <a class="code" href="_c_p_u_r_l_8j.html#a4e4c937f84da7e9cc08e5bdb40e5051a">CPURLIsHiddenKey</a>                    = <span class="stringliteral">@&quot;CPURLIsHiddenKey&quot;</span>;
<a name="l00014"></a><a class="code" href="_c_p_u_r_l_8j.html#a8c2f95aa6b8e9ad16fab2eb91dbbf547">00014</a> <a class="code" href="_c_p_u_r_l_8j.html#a8c2f95aa6b8e9ad16fab2eb91dbbf547">CPURLHasHiddenExtensionKey</a>          = <span class="stringliteral">@&quot;CPURLHasHiddenExtensionKey&quot;</span>;
<a name="l00015"></a><a class="code" href="_c_p_u_r_l_8j.html#ab993ef7c2e55ac4abed29c6bbfc010db">00015</a> <a class="code" href="_c_p_u_r_l_8j.html#ab993ef7c2e55ac4abed29c6bbfc010db">CPURLCreationDateKey</a>                = <span class="stringliteral">@&quot;CPURLCreationDateKey&quot;</span>;
<a name="l00016"></a><a class="code" href="_c_p_u_r_l_8j.html#ac8f20f1d71ccef76093e04caec2d4a08">00016</a> <a class="code" href="_c_p_u_r_l_8j.html#ac8f20f1d71ccef76093e04caec2d4a08">CPURLContentAccessDateKey</a>           = <span class="stringliteral">@&quot;CPURLContentAccessDateKey&quot;</span>;
<a name="l00017"></a><a class="code" href="_c_p_u_r_l_8j.html#a897628feffa0283c658952571b66efc4">00017</a> <a class="code" href="_c_p_u_r_l_8j.html#a897628feffa0283c658952571b66efc4">CPURLContentModificationDateKey</a>     = <span class="stringliteral">@&quot;CPURLContentModificationDateKey&quot;</span>;
<a name="l00018"></a><a class="code" href="_c_p_u_r_l_8j.html#a69f22676a5d3caa912ebdd030ccc8b90">00018</a> <a class="code" href="_c_p_u_r_l_8j.html#a69f22676a5d3caa912ebdd030ccc8b90">CPURLAttributeModificationDateKey</a>   = <span class="stringliteral">@&quot;CPURLAttributeModificationDateKey&quot;</span>;
<a name="l00019"></a><a class="code" href="_c_p_u_r_l_8j.html#a1320955ef100324c1aa1dc28ce1a735a">00019</a> <a class="code" href="_c_p_u_r_l_8j.html#a1320955ef100324c1aa1dc28ce1a735a">CPURLLinkCountKey</a>                   = <span class="stringliteral">@&quot;CPURLLinkCountKey&quot;</span>;
<a name="l00020"></a><a class="code" href="_c_p_u_r_l_8j.html#a2b05eac4a728ecee11d764c1e904f54a">00020</a> <a class="code" href="_c_p_u_r_l_8j.html#a2b05eac4a728ecee11d764c1e904f54a">CPURLParentDirectoryURLKey</a>          = <span class="stringliteral">@&quot;CPURLParentDirectoryURLKey&quot;</span>;
<a name="l00021"></a><a class="code" href="_c_p_u_r_l_8j.html#a79b1d4ea0d2fa473b46682e29418e702">00021</a> <a class="code" href="_c_p_u_r_l_8j.html#a79b1d4ea0d2fa473b46682e29418e702">CPURLVolumeURLKey</a>                   = <span class="stringliteral">@&quot;CPURLTypeIdentifierKey&quot;</span>;
<a name="l00022"></a><a class="code" href="_c_p_u_r_l_8j.html#a621d8230291f2be32a3b0d7f9c63613a">00022</a> <a class="code" href="_c_p_u_r_l_8j.html#a621d8230291f2be32a3b0d7f9c63613a">CPURLTypeIdentifierKey</a>              = <span class="stringliteral">@&quot;CPURLTypeIdentifierKey&quot;</span>;
<a name="l00023"></a><a class="code" href="_c_p_u_r_l_8j.html#adaed708eb356fdb678f6b042397671ac">00023</a> <a class="code" href="_c_p_u_r_l_8j.html#adaed708eb356fdb678f6b042397671ac">CPURLLocalizedTypeDescriptionKey</a>    = <span class="stringliteral">@&quot;CPURLLocalizedTypeDescriptionKey&quot;</span>;
<a name="l00024"></a><a class="code" href="_c_p_u_r_l_8j.html#ae725b4df0c7788df47b3134efb53e093">00024</a> <a class="code" href="_c_p_u_r_l_8j.html#ae725b4df0c7788df47b3134efb53e093">CPURLLabelNumberKey</a>                 = <span class="stringliteral">@&quot;CPURLLabelNumberKey&quot;</span>;
<a name="l00025"></a><a class="code" href="_c_p_u_r_l_8j.html#a959e54df3ba55ac9f72ab6ab69eb05ee">00025</a> <a class="code" href="_c_p_u_r_l_8j.html#a959e54df3ba55ac9f72ab6ab69eb05ee">CPURLLabelColorKey</a>                  = <span class="stringliteral">@&quot;CPURLLabelColorKey&quot;</span>;
<a name="l00026"></a><a class="code" href="_c_p_u_r_l_8j.html#a613dc56792c49eb9b731dae79b307e79">00026</a> <a class="code" href="_c_p_u_r_l_8j.html#a613dc56792c49eb9b731dae79b307e79">CPURLLocalizedLabelKey</a>              = <span class="stringliteral">@&quot;CPURLLocalizedLabelKey&quot;</span>;
<a name="l00027"></a><a class="code" href="_c_p_u_r_l_8j.html#ac10ebdea281704dba0062e96d858802e">00027</a> <a class="code" href="_c_p_u_r_l_8j.html#ac10ebdea281704dba0062e96d858802e">CPURLEffectiveIconKey</a>               = <span class="stringliteral">@&quot;CPURLEffectiveIconKey&quot;</span>;
<a name="l00028"></a><a class="code" href="_c_p_u_r_l_8j.html#a0f81be106af417c72c2ca09e58ff3d4d">00028</a> <a class="code" href="_c_p_u_r_l_8j.html#a0f81be106af417c72c2ca09e58ff3d4d">CPURLCustomIconKey</a>                  = <span class="stringliteral">@&quot;CPURLCustomIconKey&quot;</span>;
<a name="l00029"></a>00029 
<a name="l00030"></a><a class="code" href="class_c_p_u_r_l.html">00030</a> <span class="keyword">@implementation </span><a class="code" href="class_c_p_u_r_l.html">CPURL</a> : <a class="code" href="class_c_p_object.html" title="The root class from which most classes are subclassed.">CPObject</a>
<a name="l00031"></a>00031 {
<a name="l00032"></a><a class="code" href="_c_p_u_r_l_8j.html#af2b8102aeac8f02ab62ac42828289569">00032</a>     <a class="code" href="class_c_p_u_r_l.html">CPURL</a>       _base @<a class="code" href="class_c_p_u_r_l.html#a07f5f95dd514e1c317feace7581dd247">accessors</a>(readonly, <a class="code" href="_c_p_table_header_view_8j.html#af2b8102aeac8f02ab62ac42828289569">property</a>=baseURL);
<a name="l00033"></a>00033     <a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>    _relative @<a class="code" href="class_c_p_u_r_l.html#a07f5f95dd514e1c317feace7581dd247">accessors</a>(readonly, <a class="code" href="_c_p_table_header_view_8j.html#af2b8102aeac8f02ab62ac42828289569">property</a>=<a class="code" href="class_c_p_u_r_l.html#ab8c889ba0b4e2288ebc82f574d75c961">relativeString</a>);
<a name="l00034"></a>00034 
<a name="l00035"></a>00035     <a class="code" href="class_c_p_dictionary.html" title="A mutable key-value pair collection.">CPDictionary</a>    _resourceValues;
<a name="l00036"></a>00036 }
<a name="l00037"></a>00037 
<a name="l00038"></a><a class="code" href="class_c_p_u_r_l.html#ae3733ba68638f9e0cb4a8439fcb67c90">00038</a> - (id)initWithScheme:(<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)scheme host:(<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)host path:(<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)path
<a name="l00039"></a>00039 {
<a name="l00040"></a>00040     var uri = <span class="keyword">new</span> <a class="code" href="_c_p_u_r_l_8j.html#adf5d75f9eabd8f5b96a1daf69e8fb72b">URI</a>();
<a name="l00041"></a>00041     uri.scheme = scheme;
<a name="l00042"></a>00042     uri.authority = host;
<a name="l00043"></a>00043     uri.path = path;
<a name="l00044"></a>00044     [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#a1782ee6564e94e8a4ca91a8d2b13d14b">initWithString</a>:uri.toString()];
<a name="l00045"></a>00045 }
<a name="l00046"></a>00046 
<a name="l00047"></a><a class="code" href="class_c_p_u_r_l.html#a1782ee6564e94e8a4ca91a8d2b13d14b">00047</a> - (id)initWithString:(<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)URLString
<a name="l00048"></a>00048 {
<a name="l00049"></a>00049     <span class="keywordflow">return</span> [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#a60d4ae2da948497e954b19d16970e06a">initWithString</a>:URLString <a class="code" href="class_c_p_u_r_l.html#a60d4ae2da948497e954b19d16970e06a">relativeToURL</a>:nil];
<a name="l00050"></a>00050 }
<a name="l00051"></a>00051 
<a name="l00052"></a><a class="code" href="class_c_p_u_r_l.html#aa3eeb979789d9141888dccc3227eda01">00052</a> + (id)URLWithString:(<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)URLString
<a name="l00053"></a>00053 {
<a name="l00054"></a>00054     <span class="keywordflow">return</span> [[<span class="keyword">self</span> alloc] initWithString:URLString];
<a name="l00055"></a>00055 }
<a name="l00056"></a>00056 
<a name="l00057"></a><a class="code" href="class_c_p_u_r_l.html#a60d4ae2da948497e954b19d16970e06a">00057</a> - (id)initWithString:(<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)URLString relativeToURL:(<a class="code" href="class_c_p_u_r_l.html">CPURL</a>)baseURL
<a name="l00058"></a>00058 {
<a name="l00059"></a>00059     <span class="keywordflow">if</span> (!<a class="code" href="_c_p_u_r_l_8j.html#ad4078f5246f71ca88b310beeb2192ef6">URI_RE</a>.test(URLString))
<a name="l00060"></a>00060         <span class="keywordflow">return</span> nil;
<a name="l00061"></a>00061     
<a name="l00062"></a>00062     <span class="keywordflow">if</span> (<span class="keyword">self</span>)
<a name="l00063"></a>00063     {
<a name="l00064"></a>00064         _base = baseURL;
<a name="l00065"></a>00065         _relative = URLString;
<a name="l00066"></a>00066         _resourceValues = [<a class="code" href="class_c_p_dictionary.html" title="A mutable key-value pair collection.">CPDictionary</a> <a class="code" href="class_c_p_dictionary.html#af9820df885270d5200f27f9a539aca28">dictionary</a>];
<a name="l00067"></a>00067     }
<a name="l00068"></a>00068 
<a name="l00069"></a>00069     <span class="keywordflow">return</span> <span class="keyword">self</span>;
<a name="l00070"></a>00070 }
<a name="l00071"></a>00071 
<a name="l00072"></a><a class="code" href="class_c_p_u_r_l.html#a2003f8782a1f14c891024ae18aef5090">00072</a> + (id)URLWithString:(<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)URLString relativeToURL:(<a class="code" href="class_c_p_u_r_l.html">CPURL</a>)baseURL
<a name="l00073"></a>00073 {
<a name="l00074"></a>00074     <span class="keywordflow">return</span> [[<span class="keyword">self</span> alloc] initWithString:URLString relativeToURL:baseURL];
<a name="l00075"></a>00075 }
<a name="l00076"></a>00076 
<a name="l00077"></a><a class="code" href="class_c_p_u_r_l.html#a5880eca2f746d89148f78419d165b95a">00077</a> - (<a class="code" href="class_c_p_u_r_l.html">CPURL</a>)absoluteURL
<a name="l00078"></a>00078 {
<a name="l00079"></a>00079     var absStr = [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#ad2ccd2a9c907f4376793a04cc9c6562d">absoluteString</a>];
<a name="l00080"></a>00080     
<a name="l00081"></a>00081     <span class="keywordflow">if</span> (absStr !== _relative)
<a name="l00082"></a>00082         <span class="keywordflow">return</span> [[<a class="code" href="class_c_p_u_r_l.html">CPURL</a> alloc] initWithString:absStr];
<a name="l00083"></a>00083     
<a name="l00084"></a>00084     <span class="keywordflow">return</span> <span class="keyword">self</span>;
<a name="l00085"></a>00085 }
<a name="l00086"></a>00086 
<a name="l00087"></a><a class="code" href="class_c_p_u_r_l.html#ad2ccd2a9c907f4376793a04cc9c6562d">00087</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)absoluteString
<a name="l00088"></a>00088 {
<a name="l00089"></a>00089     <span class="keywordflow">return</span> <a class="code" href="_c_p_u_r_l_8j.html#aebedbf53ce9a15014605e527aec0a6ec">resolve</a>([_base absoluteString] || <span class="stringliteral">&quot;&quot;</span>, _relative);
<a name="l00090"></a>00090 }
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 <span class="comment">// if absolute, returns same as absoluteString</span>
<a name="l00093"></a><a class="code" href="class_c_p_u_r_l.html#ab8c889ba0b4e2288ebc82f574d75c961">00093</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)relativeString
<a name="l00094"></a>00094 {
<a name="l00095"></a>00095     <span class="keywordflow">return</span> _relative;
<a name="l00096"></a>00096 }
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="class_c_p_u_r_l.html#a33b850e8c07c857babcfaae95fd251fd">00098</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)path
<a name="l00099"></a>00099 {
<a name="l00100"></a>00100     var str = [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#ad2ccd2a9c907f4376793a04cc9c6562d">absoluteString</a>];
<a name="l00101"></a>00101     <span class="keywordflow">return</span> <a class="code" href="_c_p_u_r_l_8j.html#ad4078f5246f71ca88b310beeb2192ef6">URI_RE</a>.test(str) ? (<a class="code" href="_c_p_u_r_l_8j.html#afbb224ef64380e0c03fd28ca64a949ab">parse</a>(str).path || nil) : nil;
<a name="l00102"></a>00102 }
<a name="l00103"></a>00103 
<a name="l00104"></a>00104 <span class="comment">// if absolute, returns the same as path</span>
<a name="l00105"></a><a class="code" href="class_c_p_u_r_l.html#aed27e598a9cc2daf383171459918f194">00105</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)relativePath
<a name="l00106"></a>00106 {
<a name="l00107"></a>00107     <span class="keywordflow">return</span> <a class="code" href="_c_p_u_r_l_8j.html#ad4078f5246f71ca88b310beeb2192ef6">URI_RE</a>.test(_relative) ? (<a class="code" href="_c_p_u_r_l_8j.html#afbb224ef64380e0c03fd28ca64a949ab">parse</a>(_relative).path || nil) : nil;
<a name="l00108"></a>00108 }
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 
<a name="l00111"></a><a class="code" href="class_c_p_u_r_l.html#a0bb2cde858fbfb3671e894d7db589888">00111</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)scheme
<a name="l00112"></a>00112 {
<a name="l00113"></a>00113     var str = [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#ad2ccd2a9c907f4376793a04cc9c6562d">absoluteString</a>];
<a name="l00114"></a>00114     <span class="keywordflow">return</span> <a class="code" href="_c_p_u_r_l_8j.html#ad4078f5246f71ca88b310beeb2192ef6">URI_RE</a>.test(str) ? (<a class="code" href="_c_p_u_r_l_8j.html#afbb224ef64380e0c03fd28ca64a949ab">parse</a>(str).protocol || nil) : nil;
<a name="l00115"></a>00115 }
<a name="l00116"></a>00116 
<a name="l00117"></a><a class="code" href="class_c_p_u_r_l.html#ac224515efcfc617dc33a174ed6da3def">00117</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)user
<a name="l00118"></a>00118 {
<a name="l00119"></a>00119     var str = [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#ad2ccd2a9c907f4376793a04cc9c6562d">absoluteString</a>];
<a name="l00120"></a>00120     <span class="keywordflow">return</span> <a class="code" href="_c_p_u_r_l_8j.html#ad4078f5246f71ca88b310beeb2192ef6">URI_RE</a>.test(str) ? (<a class="code" href="_c_p_u_r_l_8j.html#afbb224ef64380e0c03fd28ca64a949ab">parse</a>(str).user || nil) : nil;
<a name="l00121"></a>00121 }
<a name="l00122"></a>00122 
<a name="l00123"></a><a class="code" href="class_c_p_u_r_l.html#a10c1480324438f56fb944a98bb10d91e">00123</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)password
<a name="l00124"></a>00124 {
<a name="l00125"></a>00125     var str = [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#ad2ccd2a9c907f4376793a04cc9c6562d">absoluteString</a>];
<a name="l00126"></a>00126     <span class="keywordflow">return</span> <a class="code" href="_c_p_u_r_l_8j.html#ad4078f5246f71ca88b310beeb2192ef6">URI_RE</a>.test(str) ? (<a class="code" href="_c_p_u_r_l_8j.html#afbb224ef64380e0c03fd28ca64a949ab">parse</a>(str).password || nil) : nil;
<a name="l00127"></a>00127 }
<a name="l00128"></a>00128 
<a name="l00129"></a><a class="code" href="class_c_p_u_r_l.html#a09f9c905698a52d7b587b9da016bf201">00129</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)host
<a name="l00130"></a>00130 {
<a name="l00131"></a>00131     var str = [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#ad2ccd2a9c907f4376793a04cc9c6562d">absoluteString</a>];
<a name="l00132"></a>00132     <span class="keywordflow">return</span> <a class="code" href="_c_p_u_r_l_8j.html#ad4078f5246f71ca88b310beeb2192ef6">URI_RE</a>.test(str) ? (<a class="code" href="_c_p_u_r_l_8j.html#afbb224ef64380e0c03fd28ca64a949ab">parse</a>(str).domain || nil) : nil;
<a name="l00133"></a>00133 }
<a name="l00134"></a>00134 
<a name="l00135"></a><a class="code" href="class_c_p_u_r_l.html#afb0b2908b705d989d0873255bf5fbacc">00135</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)port
<a name="l00136"></a>00136 {
<a name="l00137"></a>00137     var str = [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#ad2ccd2a9c907f4376793a04cc9c6562d">absoluteString</a>];
<a name="l00138"></a>00138     <span class="keywordflow">if</span> (<a class="code" href="_c_p_u_r_l_8j.html#ad4078f5246f71ca88b310beeb2192ef6">URI_RE</a>.test(str)) {
<a name="l00139"></a>00139         var port = <a class="code" href="_c_p_u_r_l_8j.html#afbb224ef64380e0c03fd28ca64a949ab">parse</a>(str).port;
<a name="l00140"></a>00140         <span class="keywordflow">if</span> (port)
<a name="l00141"></a>00141             <span class="keywordflow">return</span> parseInt(port, 10);
<a name="l00142"></a>00142     }
<a name="l00143"></a>00143     <span class="keywordflow">return</span> nil;
<a name="l00144"></a>00144 }
<a name="l00145"></a>00145 
<a name="l00146"></a><a class="code" href="class_c_p_u_r_l.html#af1f8687cdf19ae468a9e5eeb2f244258">00146</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)parameterString
<a name="l00147"></a>00147 {
<a name="l00148"></a>00148     var str = [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#ad2ccd2a9c907f4376793a04cc9c6562d">absoluteString</a>];
<a name="l00149"></a>00149     <span class="keywordflow">return</span> <a class="code" href="_c_p_u_r_l_8j.html#ad4078f5246f71ca88b310beeb2192ef6">URI_RE</a>.test(str) ? (<a class="code" href="_c_p_u_r_l_8j.html#afbb224ef64380e0c03fd28ca64a949ab">parse</a>(str).query || nil) : nil;
<a name="l00150"></a>00150 }
<a name="l00151"></a>00151 
<a name="l00152"></a><a class="code" href="class_c_p_u_r_l.html#aff8a13b393a58dc2419b7303e1749e64">00152</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)fragment
<a name="l00153"></a>00153 {
<a name="l00154"></a>00154     var str = [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#ad2ccd2a9c907f4376793a04cc9c6562d">absoluteString</a>];
<a name="l00155"></a>00155     <span class="keywordflow">return</span> <a class="code" href="_c_p_u_r_l_8j.html#ad4078f5246f71ca88b310beeb2192ef6">URI_RE</a>.test(str) ? (<a class="code" href="_c_p_u_r_l_8j.html#afbb224ef64380e0c03fd28ca64a949ab">parse</a>(str).anchor || nil) : nil;
<a name="l00156"></a>00156 }
<a name="l00157"></a>00157 
<a name="l00158"></a><a class="code" href="class_c_p_u_r_l.html#a0f52327b23b897e7bc35bcbec83ae36a">00158</a> - (BOOL)isEqual:(<span class="keywordtype">id</span>)anObject
<a name="l00159"></a>00159 {
<a name="l00160"></a>00160     <span class="comment">// Is checking if baseURL isEqual correct? Does &quot;identical&quot; mean same object or equivalent values?</span>
<a name="l00161"></a>00161     <span class="keywordflow">return</span> [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#ab8c889ba0b4e2288ebc82f574d75c961">relativeString</a>] === [anObject relativeString] &amp;&amp;
<a name="l00162"></a>00162         ([<span class="keyword">self</span> baseURL] === [anObject baseURL] || [[<span class="keyword">self</span> baseURL] isEqual:[anObject baseURL]]);
<a name="l00163"></a>00163 }
<a name="l00164"></a>00164 
<a name="l00165"></a><a class="code" href="class_c_p_u_r_l.html#aa795cf387a024f2a1938cad25e19e867">00165</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)lastPathComponent
<a name="l00166"></a>00166 {
<a name="l00167"></a>00167     var path = [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#a33b850e8c07c857babcfaae95fd251fd">path</a>];
<a name="l00168"></a>00168     <span class="keywordflow">return</span> path ? path.split(<span class="stringliteral">&quot;/&quot;</span>).pop() : nil;
<a name="l00169"></a>00169 }
<a name="l00170"></a>00170 
<a name="l00171"></a><a class="code" href="class_c_p_u_r_l.html#a0a00af7d10adfc787660e2fd926c3bda">00171</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)pathExtension
<a name="l00172"></a>00172 {
<a name="l00173"></a>00173     var path = [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#a33b850e8c07c857babcfaae95fd251fd">path</a>],
<a name="l00174"></a>00174         ext = path.match(/\.(\w+)$/);
<a name="l00175"></a>00175     <span class="keywordflow">return</span> ext ? ext[1] : <span class="stringliteral">&quot;&quot;</span>;
<a name="l00176"></a>00176 }
<a name="l00177"></a>00177 
<a name="l00178"></a><a class="code" href="class_c_p_u_r_l.html#a18ab1e7766f0ba63401a628572dd9267">00178</a> - (<a class="code" href="class_c_p_u_r_l.html">CPURL</a>)standardizedURL
<a name="l00179"></a>00179 {
<a name="l00180"></a>00180     <span class="keywordflow">return</span> [<a class="code" href="class_c_p_u_r_l.html">CPURL</a> <a class="code" href="class_c_p_u_r_l.html#a2003f8782a1f14c891024ae18aef5090">URLWithString</a>:format(parse(_relative)) <a class="code" href="class_c_p_u_r_l.html#a2003f8782a1f14c891024ae18aef5090">relativeToURL</a>:_base];
<a name="l00181"></a>00181 }
<a name="l00182"></a>00182 
<a name="l00183"></a><a class="code" href="class_c_p_u_r_l.html#ad3ab2c98c1dcc3a8aff2395915d8a451">00183</a> - (BOOL)isFileURL
<a name="l00184"></a>00184 {
<a name="l00185"></a>00185     <span class="keywordflow">return</span> [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#a0bb2cde858fbfb3671e894d7db589888">scheme</a>] === <span class="stringliteral">&quot;file&quot;</span>;
<a name="l00186"></a>00186 }
<a name="l00187"></a>00187 
<a name="l00188"></a><a class="code" href="class_c_p_u_r_l.html#ac0b92bf214fddc72380b272504c72c1d">00188</a> - (<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)description
<a name="l00189"></a>00189 {
<a name="l00190"></a>00190     <span class="keywordflow">return</span> [<span class="keyword">self</span> <a class="code" href="class_c_p_u_r_l.html#ad2ccd2a9c907f4376793a04cc9c6562d">absoluteString</a>];
<a name="l00191"></a>00191 }
<a name="l00192"></a>00192 
<a name="l00193"></a><a class="code" href="class_c_p_u_r_l.html#ad92b7a4f172af52461227fd5e2efa47e">00193</a> - (id)resourceValueForKey:(<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)aKey
<a name="l00194"></a>00194 {
<a name="l00195"></a>00195     <span class="keywordflow">return</span> [_resourceValues objectForKey:aKey];
<a name="l00196"></a>00196 }
<a name="l00197"></a>00197 
<a name="l00198"></a><a class="code" href="class_c_p_u_r_l.html#ab8b137d134cb237baa81b839ade23b4c">00198</a> - (id)setResourceValue:(<span class="keywordtype">id</span>)anObject forKey:(<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)aKey
<a name="l00199"></a>00199 {
<a name="l00200"></a>00200     [_resourceValues setObject:anObject forKey:aKey];
<a name="l00201"></a>00201 }
<a name="l00202"></a>00202 
<a name="l00203"></a>00203 <span class="keyword">@end</span>
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 <span class="keyword">@implementation </span><a class="code" href="class_c_p_u_r_l.html">CPURL</a> (CPCoding)
<a name="l00206"></a>00206 
<a name="l00207"></a><a class="code" href="class_c_p_u_r_l.html#a1b44875e7ef05abc05a7f1a74d2c6c23">00207</a> - (id)initWithCoder:(<a class="code" href="class_c_p_coder.html" title="Defines methods for use when archiving &amp;amp; restoring (enc/decoding).">CPCoder</a>)aCoder
<a name="l00208"></a>00208 {
<a name="l00209"></a>00209     _base = [aCoder decodeObjectForKey:&quot;CPURLBaseKey&quot;];
<a name="l00210"></a>00210     _relative = [aCoder decodeObjectForKey:&quot;CPURLRelativeKey&quot;];
<a name="l00211"></a>00211     <span class="keywordflow">return</span> <span class="keyword">self</span>;
<a name="l00212"></a>00212 }
<a name="l00213"></a>00213 
<a name="l00214"></a><a class="code" href="class_c_p_u_r_l.html#ac51be7e76aa81aca82edf3c04323b304">00214</a> - (void)encodeWithCoder:(<a class="code" href="class_c_p_coder.html" title="Defines methods for use when archiving &amp;amp; restoring (enc/decoding).">CPCoder</a>)aCoder
<a name="l00215"></a>00215 {
<a name="l00216"></a>00216     [aCoder encodeObject:_base forKey:&quot;CPURLBaseKey&quot;];
<a name="l00217"></a>00217     [aCoder encodeObject:_relative forKey:&quot;CPURLRelativeKey&quot;];
<a name="l00218"></a>00218 }
<a name="l00219"></a>00219 
<a name="l00220"></a>00220 <span class="keyword">@end</span>
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 <span class="comment">// original code: http://code.google.com/p/js-uri/</span>
<a name="l00223"></a>00223 
<a name="l00224"></a>00224 <span class="comment">// Based on the regex in RFC2396 Appendix B.</span>
<a name="l00225"></a><a class="code" href="_c_p_u_r_l_8j.html#ad4078f5246f71ca88b310beeb2192ef6">00225</a> var <a class="code" href="_c_p_u_r_l_8j.html#ad4078f5246f71ca88b310beeb2192ef6">URI_RE</a> = /^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/;
<a name="l00226"></a>00226 
<a name="l00230"></a><a class="code" href="_c_p_u_r_l_8j.html#adf5d75f9eabd8f5b96a1daf69e8fb72b">00230</a> var <a class="code" href="_c_p_u_r_l_8j.html#adf5d75f9eabd8f5b96a1daf69e8fb72b">URI</a> = function(str) {
<a name="l00231"></a>00231     <span class="keywordflow">if</span> (!str) str = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00232"></a>00232     var result = str.match(<a class="code" href="_c_p_u_r_l_8j.html#ad4078f5246f71ca88b310beeb2192ef6">URI_RE</a>);
<a name="l00233"></a>00233     this.scheme = result[1] || null;
<a name="l00234"></a>00234     this.authority = result[2] || null;
<a name="l00235"></a>00235     this.path = result[3] || null;
<a name="l00236"></a>00236     this.query = result[4] || null;
<a name="l00237"></a>00237     this.<a class="code" href="class_c_p_u_r_l.html#aff8a13b393a58dc2419b7303e1749e64">fragment</a> = result[5] || null;
<a name="l00238"></a>00238 }
<a name="l00239"></a>00239 
<a name="l00243"></a>00243 <a class="code" href="_c_p_u_r_l_8j.html#adf5d75f9eabd8f5b96a1daf69e8fb72b">URI</a>.prototype.toString = function () {
<a name="l00244"></a>00244     var str = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00245"></a>00245  
<a name="l00246"></a>00246     <span class="keywordflow">if</span> (this.scheme)
<a name="l00247"></a>00247         str += this.scheme + &quot;:&quot;;
<a name="l00248"></a>00248 
<a name="l00249"></a>00249     <span class="keywordflow">if</span> (this.authority)
<a name="l00250"></a>00250         str += &quot;<span class="comment">//&quot; + this.authority;</span>
<a name="l00251"></a>00251 
<a name="l00252"></a>00252     <a class="code" href="_c_a_backing_store_8j.html#ad2b049b1f6911d2ffffc0769dfe601e4">if</a> (this.path)
<a name="l00253"></a>00253         str += this.path;
<a name="l00254"></a>00254 
<a name="l00255"></a>00255     <span class="keywordflow">if</span> (this.query)
<a name="l00256"></a>00256         str += &quot;?&quot; + this.query;
<a name="l00257"></a>00257 
<a name="l00258"></a>00258     <span class="keywordflow">if</span> (this.<a class="code" href="class_c_p_u_r_l.html#aff8a13b393a58dc2419b7303e1749e64">fragment</a>)
<a name="l00259"></a>00259         str += &quot;#&quot; + this.<a class="code" href="class_c_p_u_r_l.html#aff8a13b393a58dc2419b7303e1749e64">fragment</a>;
<a name="l00260"></a>00260  
<a name="l00261"></a>00261     <span class="keywordflow">return</span> str;
<a name="l00262"></a>00262 }
<a name="l00263"></a>00263 
<a name="l00264"></a>00264 var <a class="code" href="_c_p_u_r_l_8j.html#afbb224ef64380e0c03fd28ca64a949ab">parse</a> = function(uri) {
<a name="l00265"></a>00265     <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="_c_p_u_r_l_8j.html#adf5d75f9eabd8f5b96a1daf69e8fb72b">URI</a>(uri);
<a name="l00266"></a>00266 }
<a name="l00267"></a>00267 
<a name="l00268"></a>00268 var unescape =  function(str, plus) {
<a name="l00269"></a>00269     <span class="keywordflow">return</span> decodeURI(str).replace(/\+/g, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00270"></a>00270 }
<a name="l00271"></a>00271 
<a name="l00272"></a>00272 var unescapeComponent = function(str, plus) {
<a name="l00273"></a>00273     <span class="keywordflow">return</span> decodeURIComponent(str).replace(/\+/g, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00274"></a>00274 }
<a name="l00275"></a>00275 
<a name="l00276"></a>00276 <span class="comment">// from Chiron&#39;s HTTP module:</span>
<a name="l00277"></a>00277 
<a name="l00278"></a>00278 <span class="comment">/**** keys</span>
<a name="l00279"></a>00279 <span class="comment">    members of a parsed URI object.</span>
<a name="l00280"></a>00280 <span class="comment">*/</span>
<a name="l00281"></a>00281 var keys = [
<a name="l00282"></a>00282     &quot;url&quot;,
<a name="l00283"></a>00283     &quot;protocol&quot;,
<a name="l00284"></a>00284     &quot;authorityRoot&quot;,
<a name="l00285"></a>00285     &quot;authority&quot;,
<a name="l00286"></a>00286         &quot;userInfo&quot;,
<a name="l00287"></a>00287             &quot;user&quot;,
<a name="l00288"></a>00288             &quot;password&quot;,
<a name="l00289"></a>00289         &quot;domain&quot;,
<a name="l00290"></a>00290             &quot;domains&quot;,
<a name="l00291"></a>00291         &quot;port&quot;,
<a name="l00292"></a>00292     &quot;path&quot;,
<a name="l00293"></a>00293         &quot;root&quot;,
<a name="l00294"></a>00294         &quot;directory&quot;,
<a name="l00295"></a>00295             &quot;directories&quot;,
<a name="l00296"></a>00296         &quot;file&quot;,
<a name="l00297"></a>00297     &quot;query&quot;,
<a name="l00298"></a>00298     &quot;anchor&quot;
<a name="l00299"></a>00299 ];
<a name="l00300"></a>00300 
<a name="l00301"></a>00301 <span class="comment">/**** expressionKeys</span>
<a name="l00302"></a>00302 <span class="comment">    members of a parsed URI object that you get</span>
<a name="l00303"></a>00303 <span class="comment">    from evaluting the strict regular expression.</span>
<a name="l00304"></a>00304 <span class="comment">*/</span>
<a name="l00305"></a><a class="code" href="_c_p_u_r_l_8j.html#a3e805a73d58ea835cc4abb63b450aea2">00305</a> var <a class="code" href="_c_p_u_r_l_8j.html#a3e805a73d58ea835cc4abb63b450aea2">expressionKeys</a> = [
<a name="l00306"></a>00306     &quot;url&quot;,
<a name="l00307"></a>00307     &quot;protocol&quot;,
<a name="l00308"></a>00308     &quot;authorityRoot&quot;,
<a name="l00309"></a>00309     &quot;authority&quot;,
<a name="l00310"></a>00310         &quot;userInfo&quot;,
<a name="l00311"></a>00311             &quot;user&quot;,
<a name="l00312"></a>00312             &quot;password&quot;,
<a name="l00313"></a>00313         &quot;domain&quot;,
<a name="l00314"></a>00314         &quot;port&quot;,
<a name="l00315"></a>00315     &quot;path&quot;,
<a name="l00316"></a>00316         &quot;root&quot;,
<a name="l00317"></a>00317         &quot;directory&quot;,
<a name="l00318"></a>00318         &quot;file&quot;,
<a name="l00319"></a>00319     &quot;query&quot;,
<a name="l00320"></a>00320     &quot;anchor&quot;
<a name="l00321"></a>00321 ];
<a name="l00322"></a>00322 
<a name="l00323"></a>00323 <span class="comment">/**** strictExpression</span>
<a name="l00324"></a>00324 <span class="comment">*/</span>
<a name="l00325"></a><a class="code" href="_c_p_u_r_l_8j.html#a5a1326f5735bac87cc514fd8654612ff">00325</a> var <a class="code" href="_c_p_u_r_l_8j.html#a5a1326f5735bac87cc514fd8654612ff">strictExpression</a> = <span class="keyword">new</span> RegExp( <span class="comment">/* url */</span>
<a name="l00326"></a>00326     <span class="stringliteral">&quot;^&quot;</span> +
<a name="l00327"></a>00327     <span class="stringliteral">&quot;(?:&quot;</span> +
<a name="l00328"></a>00328         <span class="stringliteral">&quot;([^:/?#]+):&quot;</span> + <span class="comment">/* protocol */</span>
<a name="l00329"></a>00329     <span class="stringliteral">&quot;)?&quot;</span> +
<a name="l00330"></a>00330     <span class="stringliteral">&quot;(?:&quot;</span> +
<a name="l00331"></a>00331         <span class="stringliteral">&quot;(//)&quot;</span> + <span class="comment">/* authorityRoot */</span>
<a name="l00332"></a>00332         <span class="stringliteral">&quot;(&quot;</span> + <span class="comment">/* authority */</span>
<a name="l00333"></a>00333             <span class="stringliteral">&quot;(?:&quot;</span> +
<a name="l00334"></a>00334                 <span class="stringliteral">&quot;(&quot;</span> + <span class="comment">/* userInfo */</span>
<a name="l00335"></a>00335                     <span class="stringliteral">&quot;([^:@]*)&quot;</span> + <span class="comment">/* user */</span>
<a name="l00336"></a>00336                     <span class="stringliteral">&quot;:?&quot;</span> +
<a name="l00337"></a>00337                     <span class="stringliteral">&quot;([^:@]*)&quot;</span> + <span class="comment">/* password */</span>
<a name="l00338"></a>00338                 <span class="stringliteral">&quot;)?&quot;</span> +
<a name="l00339"></a>00339                 <span class="stringliteral">&quot;@&quot;</span> +
<a name="l00340"></a>00340             <span class="stringliteral">&quot;)?&quot;</span> +
<a name="l00341"></a>00341             <span class="stringliteral">&quot;([^:/?#]*)&quot;</span> + <span class="comment">/* domain */</span>
<a name="l00342"></a>00342             <span class="stringliteral">&quot;(?::(\\d*))?&quot;</span> + <span class="comment">/* port */</span>
<a name="l00343"></a>00343         <span class="stringliteral">&quot;)&quot;</span> +
<a name="l00344"></a>00344     <span class="stringliteral">&quot;)?&quot;</span> +
<a name="l00345"></a>00345     <span class="stringliteral">&quot;(&quot;</span> + <span class="comment">/* path */</span>
<a name="l00346"></a>00346         <span class="stringliteral">&quot;(/?)&quot;</span> + <span class="comment">/* root */</span>
<a name="l00347"></a>00347         <span class="stringliteral">&quot;((?:[^?#/]*/)*)&quot;</span> +
<a name="l00348"></a>00348         <span class="stringliteral">&quot;([^?#]*)&quot;</span> + <span class="comment">/* file */</span>
<a name="l00349"></a>00349     <span class="stringliteral">&quot;)&quot;</span> +
<a name="l00350"></a>00350     <span class="stringliteral">&quot;(?:\\?([^#]*))?&quot;</span> + <span class="comment">/* query */</span>
<a name="l00351"></a>00351     <span class="stringliteral">&quot;(?:#(.*))?&quot;</span> <span class="comment">/*anchor */</span>
<a name="l00352"></a>00352 );
<a name="l00353"></a>00353 
<a name="l00354"></a>00354 <span class="comment">/**** Parser</span>
<a name="l00355"></a>00355 <span class="comment">    returns a URI parser function given</span>
<a name="l00356"></a>00356 <span class="comment">    a regular expression that renders </span>
<a name="l00357"></a>00357 <span class="comment">    `expressionKeys` and returns an `Object`</span>
<a name="l00358"></a>00358 <span class="comment">    mapping all `keys` to values.</span>
<a name="l00359"></a>00359 <span class="comment">*/</span>
<a name="l00360"></a><a class="code" href="_c_p_u_r_l_8j.html#a4ef7bcbee0350d2dea7de9d7c1c4576d">00360</a> var <a class="code" href="_c_p_u_r_l_8j.html#a4ef7bcbee0350d2dea7de9d7c1c4576d">Parser</a> = function (expression) {
<a name="l00361"></a>00361     <span class="keywordflow">return</span> function (url) {
<a name="l00362"></a>00362         <span class="keywordflow">if</span> (typeof url == <span class="stringliteral">&quot;undefined&quot;</span>)
<a name="l00363"></a>00363             <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&quot;HttpError: URL is undefined&quot;</span>);
<a name="l00364"></a>00364         <span class="keywordflow">if</span> (typeof url != <span class="stringliteral">&quot;string&quot;</span>) <span class="keywordflow">return</span> <span class="keyword">new</span> Object(url);
<a name="l00365"></a>00365 
<a name="l00366"></a>00366         var items = {};
<a name="l00367"></a>00367         var parts = expression.exec(url);
<a name="l00368"></a>00368 
<a name="l00369"></a>00369         <span class="keywordflow">for</span> (var i = 0; i &lt; parts.length; i++) {
<a name="l00370"></a>00370             items[expressionKeys[i]] = parts[i] ? parts[i] : <span class="stringliteral">&quot;&quot;</span>;
<a name="l00371"></a>00371         }
<a name="l00372"></a>00372 
<a name="l00373"></a>00373         items.root = (items.root || items.authorityRoot) ? <span class="charliteral">&#39;/&#39;</span> : <span class="stringliteral">&#39;&#39;</span>;
<a name="l00374"></a>00374 
<a name="l00375"></a>00375         items.directories = items.directory.split(<span class="stringliteral">&quot;/&quot;</span>);
<a name="l00376"></a>00376         <span class="keywordflow">if</span> (items.directories[items.directories.length - 1] == <span class="stringliteral">&quot;&quot;</span>) {
<a name="l00377"></a>00377             items.directories.pop();
<a name="l00378"></a>00378         }
<a name="l00379"></a>00379 
<a name="l00380"></a>00380         <span class="comment">/* normalize */</span>
<a name="l00381"></a>00381         var directories = [];
<a name="l00382"></a>00382         <span class="keywordflow">for</span> (var i = 0; i &lt; items.directories.length; i++) {
<a name="l00383"></a>00383             var directory = items.directories[i];
<a name="l00384"></a>00384             <span class="keywordflow">if</span> (directory == <span class="charliteral">&#39;.&#39;</span>) {
<a name="l00385"></a>00385             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (directory == <span class="stringliteral">&#39;..&#39;</span>) {
<a name="l00386"></a>00386                 <span class="keywordflow">if</span> (directories.length &amp;&amp; directories[directories.length - 1] != <span class="stringliteral">&#39;..&#39;</span>)
<a name="l00387"></a>00387                     directories.pop();
<a name="l00388"></a>00388                 <span class="keywordflow">else</span>
<a name="l00389"></a>00389                     directories.push(<span class="stringliteral">&#39;..&#39;</span>);
<a name="l00390"></a>00390             } <span class="keywordflow">else</span> {
<a name="l00391"></a>00391                 directories.push(directory);
<a name="l00392"></a>00392             }
<a name="l00393"></a>00393         }
<a name="l00394"></a>00394         items.directories = directories;
<a name="l00395"></a>00395 
<a name="l00396"></a>00396         items.domains = items.domain.split(<span class="stringliteral">&quot;.&quot;</span>);
<a name="l00397"></a>00397 
<a name="l00398"></a>00398         <span class="keywordflow">return</span> items;
<a name="l00399"></a>00399     };
<a name="l00400"></a>00400 };
<a name="l00401"></a>00401 
<a name="l00402"></a>00402 <span class="comment">/**** parse</span>
<a name="l00403"></a>00403 <span class="comment">    a strict URI parser.</span>
<a name="l00404"></a>00404 <span class="comment">*/</span>
<a name="l00405"></a><a class="code" href="_c_p_u_r_l_8j.html#afbb224ef64380e0c03fd28ca64a949ab">00405</a> var parse = <a class="code" href="_c_p_u_r_l_8j.html#a4ef7bcbee0350d2dea7de9d7c1c4576d">Parser</a>(strictExpression);
<a name="l00406"></a>00406 
<a name="l00407"></a>00407 <span class="comment">/**** format</span>
<a name="l00408"></a>00408 <span class="comment">    accepts a parsed URI object and returns</span>
<a name="l00409"></a>00409 <span class="comment">    the corresponding string.</span>
<a name="l00410"></a>00410 <span class="comment">*/</span>
<a name="l00411"></a><a class="code" href="_c_p_u_r_l_8j.html#adcb923889bccfbcacbd75505c9667b42">00411</a> var <a class="code" href="_c_p_u_r_l_8j.html#adcb923889bccfbcacbd75505c9667b42">format</a> = function (<span class="keywordtype">object</span>) {
<a name="l00412"></a>00412     <span class="keywordflow">if</span> (typeof(<span class="keywordtype">object</span>) == <span class="stringliteral">&#39;undefined&#39;</span>)
<a name="l00413"></a>00413         <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&quot;UrlError: URL undefined for urls#format&quot;</span>);
<a name="l00414"></a>00414     <span class="keywordflow">if</span> (<span class="keywordtype">object</span> instanceof String || typeof(<span class="keywordtype">object</span>) == <span class="stringliteral">&#39;string&#39;</span>)
<a name="l00415"></a>00415         <span class="keywordflow">return</span> object;
<a name="l00416"></a>00416     var domain =
<a name="l00417"></a>00417         <span class="keywordtype">object</span>.domains ?
<a name="l00418"></a>00418         <span class="keywordtype">object</span>.domains.join(<span class="stringliteral">&quot;.&quot;</span>) :
<a name="l00419"></a>00419         <span class="keywordtype">object</span>.domain;
<a name="l00420"></a>00420     var userInfo = (
<a name="l00421"></a>00421             <span class="keywordtype">object</span>.user ||
<a name="l00422"></a>00422             <span class="keywordtype">object</span>.password 
<a name="l00423"></a>00423         ) ?
<a name="l00424"></a>00424         (
<a name="l00425"></a>00425             (<span class="keywordtype">object</span>.<a class="code" href="class_c_p_u_r_l.html#ac224515efcfc617dc33a174ed6da3def">user</a> || <span class="stringliteral">&quot;&quot;</span>) + 
<a name="l00426"></a>00426             (<span class="keywordtype">object</span>.password ? <span class="stringliteral">&quot;:&quot;</span> + <span class="keywordtype">object</span>.password : <span class="stringliteral">&quot;&quot;</span>) 
<a name="l00427"></a>00427         ) :
<a name="l00428"></a>00428         <span class="keywordtype">object</span>.userInfo;
<a name="l00429"></a>00429     var authority = (
<a name="l00430"></a>00430             userInfo ||
<a name="l00431"></a>00431             domain ||
<a name="l00432"></a>00432             <span class="keywordtype">object</span>.port
<a name="l00433"></a>00433         ) ? (
<a name="l00434"></a>00434             (userInfo ? userInfo + <span class="stringliteral">&quot;@&quot;</span> : <span class="stringliteral">&quot;&quot;</span>) +
<a name="l00435"></a>00435             (domain || <span class="stringliteral">&quot;&quot;</span>) + 
<a name="l00436"></a>00436             (<span class="keywordtype">object</span>.<a class="code" href="class_c_p_u_r_l.html#afb0b2908b705d989d0873255bf5fbacc">port</a> ? <span class="stringliteral">&quot;:&quot;</span> + <span class="keywordtype">object</span>.<a class="code" href="class_c_p_u_r_l.html#afb0b2908b705d989d0873255bf5fbacc">port</a> : <span class="stringliteral">&quot;&quot;</span>)
<a name="l00437"></a>00437         ) :
<a name="l00438"></a>00438         <span class="keywordtype">object</span>.authority;
<a name="l00439"></a>00439     var directory =
<a name="l00440"></a>00440         <span class="keywordtype">object</span>.directories ?
<a name="l00441"></a>00441         <span class="keywordtype">object</span>.directories.join(<span class="stringliteral">&quot;/&quot;</span>) :
<a name="l00442"></a>00442         <span class="keywordtype">object</span>.directory;
<a name="l00443"></a>00443     var path =
<a name="l00444"></a>00444         directory || <span class="keywordtype">object</span>.file ?
<a name="l00445"></a>00445         (
<a name="l00446"></a>00446             (directory ? directory + <span class="stringliteral">&quot;/&quot;</span> : <span class="stringliteral">&quot;&quot;</span>) +
<a name="l00447"></a>00447             (<span class="keywordtype">object</span>.file || <span class="stringliteral">&quot;&quot;</span>)
<a name="l00448"></a>00448         ) :
<a name="l00449"></a>00449         <span class="keywordtype">object</span>.path;
<a name="l00450"></a>00450     <span class="keywordflow">return</span> (
<a name="l00451"></a>00451         (<span class="keywordtype">object</span>.protocol ? <span class="keywordtype">object</span>.protocol + <span class="stringliteral">&quot;:&quot;</span> : <span class="stringliteral">&quot;&quot;</span>) +
<a name="l00452"></a>00452         (authority ? <span class="stringliteral">&quot;//&quot;</span> + authority : <span class="stringliteral">&quot;&quot;</span>) +
<a name="l00453"></a>00453         (<span class="keywordtype">object</span>.root || (authority &amp;&amp; path) ? <span class="stringliteral">&quot;/&quot;</span> : <span class="stringliteral">&quot;&quot;</span>) +
<a name="l00454"></a>00454         (path ? path : <span class="stringliteral">&quot;&quot;</span>) +
<a name="l00455"></a>00455         (<span class="keywordtype">object</span>.query ? <span class="stringliteral">&quot;?&quot;</span> + <span class="keywordtype">object</span>.query : <span class="stringliteral">&quot;&quot;</span>) +
<a name="l00456"></a>00456         (<span class="keywordtype">object</span>.anchor ? <span class="stringliteral">&quot;#&quot;</span> + <span class="keywordtype">object</span>.anchor : <span class="stringliteral">&quot;&quot;</span>)
<a name="l00457"></a>00457     ) || <span class="keywordtype">object</span>.url || <span class="stringliteral">&quot;&quot;</span>;
<a name="l00458"></a>00458 };
<a name="l00459"></a>00459 
<a name="l00460"></a>00460 <span class="comment">/**** resolveObject</span>
<a name="l00461"></a>00461 <span class="comment">    returns an object representing a URL resolved from</span>
<a name="l00462"></a>00462 <span class="comment">    a relative location and a source location.</span>
<a name="l00463"></a>00463 <span class="comment">*/</span>
<a name="l00464"></a><a class="code" href="_c_p_u_r_l_8j.html#a975fff3094f6a18c239fa777836327ce">00464</a> var <a class="code" href="_c_p_u_r_l_8j.html#a975fff3094f6a18c239fa777836327ce">resolveObject</a> = function (source, <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>) {
<a name="l00465"></a>00465     <span class="keywordflow">if</span> (!source) 
<a name="l00466"></a>00466         <span class="keywordflow">return</span> <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>;
<a name="l00467"></a>00467 
<a name="l00468"></a>00468     source = <a class="code" href="_c_p_u_r_l_8j.html#afbb224ef64380e0c03fd28ca64a949ab">parse</a>(source);
<a name="l00469"></a>00469     <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a> = <a class="code" href="_c_p_u_r_l_8j.html#afbb224ef64380e0c03fd28ca64a949ab">parse</a>(<a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>);
<a name="l00470"></a>00470 
<a name="l00471"></a>00471     <span class="keywordflow">if</span> (<a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.url == <span class="stringliteral">&quot;&quot;</span>)
<a name="l00472"></a>00472         <span class="keywordflow">return</span> source;
<a name="l00473"></a>00473 
<a name="l00474"></a>00474     <span class="keyword">delete</span> source.url;
<a name="l00475"></a>00475     <span class="keyword">delete</span> source.authority;
<a name="l00476"></a>00476     <span class="keyword">delete</span> source.domain;
<a name="l00477"></a>00477     <span class="keyword">delete</span> source.userInfo;
<a name="l00478"></a>00478     <span class="keyword">delete</span> source.path;
<a name="l00479"></a>00479     <span class="keyword">delete</span> source.directory;
<a name="l00480"></a>00480 
<a name="l00481"></a>00481     <span class="keywordflow">if</span> (
<a name="l00482"></a>00482         <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.protocol &amp;&amp; <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.protocol != source.protocol ||
<a name="l00483"></a>00483         <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.authority &amp;&amp; <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.authority != source.authority
<a name="l00484"></a>00484     ) {
<a name="l00485"></a>00485         source = <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>;
<a name="l00486"></a>00486     } <span class="keywordflow">else</span> {
<a name="l00487"></a>00487         <span class="keywordflow">if</span> (<a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.root) {
<a name="l00488"></a>00488             source.directories = <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.directories;
<a name="l00489"></a>00489         } <span class="keywordflow">else</span> {
<a name="l00490"></a>00490 
<a name="l00491"></a>00491             var directories = <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.directories;
<a name="l00492"></a>00492             <span class="keywordflow">for</span> (var i = 0; i &lt; directories.length; i++) {
<a name="l00493"></a>00493                 var directory = directories[i];
<a name="l00494"></a>00494                 <span class="keywordflow">if</span> (directory == <span class="stringliteral">&quot;.&quot;</span>) {
<a name="l00495"></a>00495                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (directory == <span class="stringliteral">&quot;..&quot;</span>) {
<a name="l00496"></a>00496                     <span class="keywordflow">if</span> (source.directories.length) {
<a name="l00497"></a>00497                         source.directories.pop();
<a name="l00498"></a>00498                     } <span class="keywordflow">else</span> {
<a name="l00499"></a>00499                         source.directories.push(<span class="stringliteral">&#39;..&#39;</span>);
<a name="l00500"></a>00500                     }
<a name="l00501"></a>00501                 } <span class="keywordflow">else</span> {
<a name="l00502"></a>00502                     source.directories.push(directory);
<a name="l00503"></a>00503                 }
<a name="l00504"></a>00504             }
<a name="l00505"></a>00505 
<a name="l00506"></a>00506             <span class="keywordflow">if</span> (<a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.file == <span class="stringliteral">&quot;.&quot;</span>) {
<a name="l00507"></a>00507                 <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.file = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00508"></a>00508             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.file == <span class="stringliteral">&quot;..&quot;</span>) {
<a name="l00509"></a>00509                 source.directories.pop();
<a name="l00510"></a>00510                 <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.file = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00511"></a>00511             }
<a name="l00512"></a>00512         }
<a name="l00513"></a>00513     }
<a name="l00514"></a>00514 
<a name="l00515"></a>00515     <span class="keywordflow">if</span> (<a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.root)
<a name="l00516"></a>00516         source.root = <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.root;
<a name="l00517"></a>00517     <span class="keywordflow">if</span> (<a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.protcol)
<a name="l00518"></a>00518         source.protocol = <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.protocol;
<a name="l00519"></a>00519     <span class="keywordflow">if</span> (!(!<a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.path &amp;&amp; <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.anchor))
<a name="l00520"></a>00520         source.file = <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.file;
<a name="l00521"></a>00521     source.query = <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.query;
<a name="l00522"></a>00522     source.anchor = <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>.anchor;
<a name="l00523"></a>00523 
<a name="l00524"></a>00524     <span class="keywordflow">return</span> source;
<a name="l00525"></a>00525 };
<a name="l00526"></a>00526 
<a name="l00527"></a>00527 <span class="comment">/**** relativeObject</span>
<a name="l00528"></a>00528 <span class="comment">    returns an object representing a relative URL to</span>
<a name="l00529"></a>00529 <span class="comment">    a given target URL from a source URL.</span>
<a name="l00530"></a>00530 <span class="comment">*/</span>
<a name="l00531"></a><a class="code" href="_c_p_u_r_l_8j.html#a3fb51075fd53c53ce6efd0999cf61358">00531</a> var <a class="code" href="_c_p_u_r_l_8j.html#a3fb51075fd53c53ce6efd0999cf61358">relativeObject</a> = function (source, target) {
<a name="l00532"></a>00532     target = <a class="code" href="_c_p_u_r_l_8j.html#afbb224ef64380e0c03fd28ca64a949ab">parse</a>(target);
<a name="l00533"></a>00533     source = <a class="code" href="_c_p_u_r_l_8j.html#afbb224ef64380e0c03fd28ca64a949ab">parse</a>(source);
<a name="l00534"></a>00534 
<a name="l00535"></a>00535     <span class="keyword">delete</span> target.url;
<a name="l00536"></a>00536 
<a name="l00537"></a>00537     <span class="keywordflow">if</span> (
<a name="l00538"></a>00538         target.protocol == source.protocol &amp;&amp;
<a name="l00539"></a>00539         target.authority == source.authority
<a name="l00540"></a>00540     ) {
<a name="l00541"></a>00541         <span class="keyword">delete</span> target.protocol;
<a name="l00542"></a>00542         <span class="keyword">delete</span> target.authority;
<a name="l00543"></a>00543         <span class="keyword">delete</span> target.userInfo;
<a name="l00544"></a>00544         <span class="keyword">delete</span> target.user;
<a name="l00545"></a>00545         <span class="keyword">delete</span> target.password;
<a name="l00546"></a>00546         <span class="keyword">delete</span> target.domain;
<a name="l00547"></a>00547         <span class="keyword">delete</span> target.domains;
<a name="l00548"></a>00548         <span class="keyword">delete</span> target.port;
<a name="l00549"></a>00549         <span class="keywordflow">if</span> (
<a name="l00550"></a>00550             !!target.root == !!source.root &amp;&amp; !(
<a name="l00551"></a>00551                 target.root &amp;&amp;
<a name="l00552"></a>00552                 target.directories[0] != source.directories[0]
<a name="l00553"></a>00553             )
<a name="l00554"></a>00554         ) {
<a name="l00555"></a>00555             <span class="keyword">delete</span> target.path;
<a name="l00556"></a>00556             <span class="keyword">delete</span> target.root;
<a name="l00557"></a>00557             <span class="keyword">delete</span> target.directory;
<a name="l00558"></a>00558             <span class="keywordflow">while</span> (
<a name="l00559"></a>00559                 source.directories.length &amp;&amp;
<a name="l00560"></a>00560                 target.directories.length &amp;&amp;
<a name="l00561"></a>00561                 target.directories[0] == source.directories[0]
<a name="l00562"></a>00562             ) {
<a name="l00563"></a>00563                 target.directories.shift();
<a name="l00564"></a>00564                 source.directories.shift();
<a name="l00565"></a>00565             }
<a name="l00566"></a>00566             <span class="keywordflow">while</span> (source.directories.length) {
<a name="l00567"></a>00567                 source.directories.shift();
<a name="l00568"></a>00568                 target.directories.unshift(<span class="stringliteral">&#39;..&#39;</span>);
<a name="l00569"></a>00569             }
<a name="l00570"></a>00570 
<a name="l00571"></a>00571             <span class="keywordflow">if</span> (!target.root &amp;&amp; !target.directories.length &amp;&amp; !target.file &amp;&amp; source.file)
<a name="l00572"></a>00572                 target.directories.push(<span class="charliteral">&#39;.&#39;</span>);
<a name="l00573"></a>00573 
<a name="l00574"></a>00574             <span class="keywordflow">if</span> (source.file == target.file)
<a name="l00575"></a>00575                 <span class="keyword">delete</span> target.file;
<a name="l00576"></a>00576             <span class="keywordflow">if</span> (source.query == target.query)
<a name="l00577"></a>00577                 <span class="keyword">delete</span> target.query;
<a name="l00578"></a>00578             <span class="keywordflow">if</span> (source.anchor == target.anchor)
<a name="l00579"></a>00579                 <span class="keyword">delete</span> target.anchor;
<a name="l00580"></a>00580         }
<a name="l00581"></a>00581     }
<a name="l00582"></a>00582 
<a name="l00583"></a>00583     <span class="keywordflow">return</span> target;
<a name="l00584"></a>00584 };
<a name="l00585"></a>00585 
<a name="l00586"></a>00586 <span class="comment">/**** resolve</span>
<a name="l00587"></a>00587 <span class="comment">    returns a URL resovled to a relative URL from a source URL.</span>
<a name="l00588"></a>00588 <span class="comment">*/</span>
<a name="l00589"></a><a class="code" href="_c_p_u_r_l_8j.html#aebedbf53ce9a15014605e527aec0a6ec">00589</a> var <a class="code" href="_c_p_u_r_l_8j.html#aebedbf53ce9a15014605e527aec0a6ec">resolve</a> = function (source, <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>) {
<a name="l00590"></a>00590     <span class="keywordflow">return</span> <a class="code" href="_c_p_u_r_l_8j.html#adcb923889bccfbcacbd75505c9667b42">format</a>(<a class="code" href="_c_p_u_r_l_8j.html#a975fff3094f6a18c239fa777836327ce">resolveObject</a>(source, <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a>));
<a name="l00591"></a>00591 };
<a name="l00592"></a>00592 
<a name="l00593"></a>00593 <span class="comment">/**** relative</span>
<a name="l00594"></a>00594 <span class="comment">    returns a relative URL to a target from a source.</span>
<a name="l00595"></a>00595 <span class="comment">*/</span>
<a name="l00596"></a><a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">00596</a> var <a class="code" href="_c_p_u_r_l_8j.html#ab289f7a69a00ba6dca01ef0b34b6fe0c">relative</a> = function (source, target) {
<a name="l00597"></a>00597     <span class="keywordflow">return</span> <a class="code" href="_c_p_u_r_l_8j.html#adcb923889bccfbcacbd75505c9667b42">format</a>(<a class="code" href="_c_p_u_r_l_8j.html#a3fb51075fd53c53ce6efd0999cf61358">relativeObject</a>(source, target));
<a name="l00598"></a>00598 };
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
