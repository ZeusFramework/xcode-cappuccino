<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CPFoundation: CPUndoManager luokkareferenssi</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generoinut Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Pääsivu</span></a></li>
      <li><a href="pages.html"><span>Liittyvät&nbsp;sivut</span></a></li>
      <li><a href="modules.html"><span>Moduulit</span></a></li>
      <li class="current"><a href="annotated.html"><span>Luokat</span></a></li>
      <li><a href="files.html"><span>Tiedostot</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Luokkalista</span></a></li>
      <li><a href="functions.html"><span>Luokan&nbsp;jäsenet</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>CPUndoManager luokkareferenssi<br/>
<small>
[<a class="el" href="group__foundation.html">Foundation</a>]</small>
</h1><!-- doxytag: class="CPUndoManager" -->
<p>A general mechanism for user action "undo".  
<a href="#_details">Lisää...</a></p>

<p><a href="class_c_p_undo_manager-members.html">Lista kaikista jäsenistä.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Julkiset jäsenfunktiot</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#a5c10e31c699aaad0216d07bfa048ae78">init</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#a6f7eb271e86b308f8a972d9cd6e84f3d">registerUndoWithTarget:selector:object:</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#afda2099de67bedf8a3e75a8ce128633f">prepareWithInvocationTarget:</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(BOOL)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#aa95000c40b5bf973564422aa2c3113a3">canRedo</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(BOOL)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#a5a4d51d2808bbeec3de73bc5f17a4f8e">canUndo</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#a8461cff7f94960cdd44d704236db0d3b">undo</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#aa8caf4c7852b9dac05c707c7b13c53fc">undoNestedGroup</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#ac15a928a1dc50cb5d192bb5dc20af01f">redo</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#aa4d30489ad433b09ab20637c71261a48">beginUndoGrouping</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#ac49120debe2177f67b5c822c48f14657">endUndoGrouping</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#afe13d54edbe58a3f2ca9c134ffa14e3f">enableUndoRegistration</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(BOOL)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#abf7c504ba2471ce1e9d89881af690ea8">groupsByEvent</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#af1d8252a39f2ec6f0dca17187f15e6d7">setGroupsByEvent:</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(unsigned)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#a4c3a377f09c0cf9e98b0679e680ccaa4">groupingLevel</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#a0979cd7af7a4e1c64ef7aa8c553b43c2">disableUndoRegistration</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(BOOL)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#ae72531cc6abebfafa8134b8ec47dc09c">isUndoRegistrationEnabled</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(BOOL)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#a16aa42115baea4d0f193d86817afccc5">isUndoing</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(BOOL)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#a7eb97b135068c9980eb773d11faaefdf">isRedoing</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#ab88f9690bcd20ec3fa56274d4775f960">removeAllActions</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#add722ccb9a10f5fa9e73c8b0dc5695da">removeAllActionsWithTarget:</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#a143ea92df9368bb31fd92d993e0ae2c5">setActionName:</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(<a class="el" href="class_c_p_string.html">CPString</a>)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#a65f6e3df36b2cc2fd462961f68b983ef">redoActionName</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(<a class="el" href="class_c_p_string.html">CPString</a>)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#a3841242891fc00a0cf47bf96b5126fa1">undoActionName</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(<a class="el" href="class_c_p_array.html">CPArray</a>)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#a85e28acfaab288d473028367781b24a4">runLoopModes</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#aac89a2ae56ce38c011a677fb9ac36e9f">setRunLoopModes:</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#ac213940733e724fc57f01af5625ca689">observeChangesForKeyPath:ofObject:</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#af6d0973dd061f1c69877ddb02d5d8485">stopObservingChangesForKeyPath:ofObject:</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#a1c7233d21b76b099ecef59ad6960732d">observeValueForKeyPath:ofObject:change:context:</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#abe59da4cdc2b929603b6ce0def53cd81">initWithCoder:</a><code> [implementation]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_c_p_undo_manager.html#a12297dba759ae0dc66aa98780197c6db">encodeWithCoder:</a><code> [implementation]</code></td></tr>
</table>
<hr/><a name="_details"></a><h2>Yksityiskohtainen selite</h2>
<p>A general mechanism for user action "undo". </p>
<p><a class="el" href="class_c_p_undo_manager.html" title="A general mechanism for user action &quot;undo&quot;.">CPUndoManager</a> provides a general mechanism supporting implementation of user action "undo" in applications. Essentially, it allows you to store sequences of messages and receivers that need to be invoked to undo or redo an action. The various methods in this class provide for grouping of sets of actions, execution of undo or redo actions, and tuning behavior parameters such as the size of the undo stack. Each application entity with its own editing history (e.g., a document) should have its own undo manager instance. Obtain an instance through a simple <code></code>[[<a class="el" href="class_c_p_undo_manager.html" title="A general mechanism for user action &quot;undo&quot;.">CPUndoManager</a> <code>alloc</code>] <code>init</code>] message. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00170">170</a>.</p>
<hr/><h2>Jäsenfunktioiden dokumentaatio</h2>
<a class="anchor" id="aa4d30489ad433b09ab20637c71261a48"></a><!-- doxytag: member="CPUndoManager::beginUndoGrouping" ref="aa4d30489ad433b09ab20637c71261a48" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) beginUndoGrouping </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Starts a new grouping of undo tasks, and makes it the current grouping. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00412">412</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00413"></a>00413 {
<a name="l00414"></a>00414     <span class="comment">// It doesn&#39;t matter that the user is creating a group themselves, we are</span>
<a name="l00415"></a>00415     <span class="comment">// pretending to have opened the group at the beginning of the run loop,</span>
<a name="l00416"></a>00416     <span class="comment">// so create an implicit one here.</span>
<a name="l00417"></a>00417     <span class="keywordflow">if</span> (!_currentGrouping &amp;&amp; [<span class="keyword">self</span> <a class="code" href="class_c_p_undo_manager.html#abf7c504ba2471ce1e9d89881af690ea8">groupsByEvent</a>])
<a name="l00418"></a>00418         [<span class="keyword">self</span> _beginUndoGroupingForEvent];
<a name="l00419"></a>00419 
<a name="l00420"></a>00420     [[<a class="code" href="class_c_p_notification_center.html" title="Sends messages (CPNotification) between objects.">CPNotificationCenter</a> defaultCenter]
<a name="l00421"></a>00421         postNotificationName:<a class="code" href="_c_p_undo_manager_8j.html#acadaf2cacdbc79e756798193f272588e">CPUndoManagerCheckpointNotification</a>
<a name="l00422"></a>00422                       <span class="keywordtype">object</span>:<span class="keyword">self</span>];
<a name="l00423"></a>00423 
<a name="l00424"></a>00424     [<span class="keyword">self</span> _beginUndoGrouping];
<a name="l00425"></a>00425 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa95000c40b5bf973564422aa2c3113a3"></a><!-- doxytag: member="CPUndoManager::canRedo" ref="aa95000c40b5bf973564422aa2c3113a3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) canRedo </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns <code>YES</code> if the user can perform a redo operation. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00304">304</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00305"></a>00305 {
<a name="l00306"></a>00306     [[<a class="code" href="class_c_p_notification_center.html" title="Sends messages (CPNotification) between objects.">CPNotificationCenter</a> defaultCenter]
<a name="l00307"></a>00307         postNotificationName:<a class="code" href="_c_p_undo_manager_8j.html#acadaf2cacdbc79e756798193f272588e">CPUndoManagerCheckpointNotification</a>
<a name="l00308"></a>00308                       <span class="keywordtype">object</span>:<span class="keyword">self</span>];
<a name="l00309"></a>00309 
<a name="l00310"></a>00310     <span class="keywordflow">return</span> [_redoStack count] &gt; 0;
<a name="l00311"></a>00311 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5a4d51d2808bbeec3de73bc5f17a4f8e"></a><!-- doxytag: member="CPUndoManager::canUndo" ref="a5a4d51d2808bbeec3de73bc5f17a4f8e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) canUndo </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns <code>YES</code> if the user can perform an undo operation. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00316">316</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00317"></a>00317 {
<a name="l00318"></a>00318     <span class="keywordflow">if</span> (_undoStack.length &gt; 0)
<a name="l00319"></a>00319         <span class="keywordflow">return</span> YES;
<a name="l00320"></a>00320     
<a name="l00321"></a>00321     <span class="keywordflow">return</span> [_currentGrouping actions].length &gt; 0;
<a name="l00322"></a>00322 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0979cd7af7a4e1c64ef7aa8c553b43c2"></a><!-- doxytag: member="CPUndoManager::disableUndoRegistration" ref="a0979cd7af7a4e1c64ef7aa8c553b43c2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) disableUndoRegistration </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disables undo registrations. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00541">541</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00542"></a>00542 {
<a name="l00543"></a>00543     ++_disableCount;
<a name="l00544"></a>00544 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afe13d54edbe58a3f2ca9c134ffa14e3f"></a><!-- doxytag: member="CPUndoManager::enableUndoRegistration" ref="afe13d54edbe58a3f2ca9c134ffa14e3f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) enableUndoRegistration </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enables undo registrations. Calls to this method must be balanced with calls to disableUndoRegistration. So, if two disable calls were made, two enable calls are required to actually enable undo registration again. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00489">489</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00490"></a>00490 {
<a name="l00491"></a>00491     <span class="keywordflow">if</span> (_disableCount &lt;= 0)
<a name="l00492"></a>00492         [<a class="code" href="class_c_p_exception.html" title="Used to implement exception handling (creating &amp;amp; raising).">CPException</a> <span class="keyword">raise</span>:<a class="code" href="_c_p_exception_8j.html#aef6598bfe3855334c5a867d55a8816a8">CPInternalInconsistencyException</a>
<a name="l00493"></a>00493                     reason:<span class="stringliteral">&quot;enableUndoRegistration. There are no disable messages in effect right now.&quot;</span>];
<a name="l00494"></a>00494         
<a name="l00495"></a>00495     _disableCount--;
<a name="l00496"></a>00496 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a12297dba759ae0dc66aa98780197c6db"></a><!-- doxytag: member="CPUndoManager::encodeWithCoder:" ref="a12297dba759ae0dc66aa98780197c6db" args="(CPCoder aCoder)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) encodeWithCoder: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="class_c_p_coder.html">CPCoder</a>)&nbsp;</td>
          <td class="paramname"> <em>aCoder</em></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00770">770</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00770"></a>00770                        :(<a class="code" href="class_c_p_coder.html" title="Defines methods for use when archiving &amp;amp; restoring (enc/decoding).">CPCoder</a>)aCoder
<a name="l00771"></a>00771 {
<a name="l00772"></a>00772     [aCoder encodeObject:_redoStack forKey:<a class="code" href="_c_p_undo_manager_8j.html#ac9b814ef3588561040a6e45edf54bebd">CPUndoManagerRedoStackKey</a>];
<a name="l00773"></a>00773     [aCoder encodeObject:_undoStack forKey:<a class="code" href="_c_p_undo_manager_8j.html#a3d032540fd77975f742e1234fb1c2558">CPUndoManagerUndoStackKey</a>];
<a name="l00774"></a>00774     
<a name="l00775"></a>00775     [aCoder encodeInt:_levelsOfUndo forKey:<a class="code" href="_c_p_undo_manager_8j.html#a990cbb45694d6247a21e36eab9d1406a">CPUndoManagerLevelsOfUndoKey</a>];
<a name="l00776"></a>00776     [aCoder encodeObject:_actionName forKey:<a class="code" href="_c_p_undo_manager_8j.html#affeb8cc84ace6412fa6ddb98ea2bdf35">CPUndoManagerActionNameKey</a>];
<a name="l00777"></a>00777     
<a name="l00778"></a>00778     [aCoder encodeObject:_currentGrouping forKey:<a class="code" href="_c_p_undo_manager_8j.html#a7ca9ea54175879769cf6e551b2f66b79">CPUndoManagerCurrentGroupingKey</a>];
<a name="l00779"></a>00779 
<a name="l00780"></a>00780     [aCoder encodeObject:_runLoopModes forKey:<a class="code" href="_c_p_undo_manager_8j.html#a6b7ff9743e7e7f389b6c6ff351c19f29">CPUndoManagerRunLoopModesKey</a>];
<a name="l00781"></a>00781     [aCoder encodeBool:_groupsByEvent forKey:<a class="code" href="_c_p_undo_manager_8j.html#af3d76aeb6f1ac36ec0b1a9b98950d9ff">CPUndoManagerGroupsByEventKey</a>];
<a name="l00782"></a>00782 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac49120debe2177f67b5c822c48f14657"></a><!-- doxytag: member="CPUndoManager::endUndoGrouping" ref="ac49120debe2177f67b5c822c48f14657" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) endUndoGrouping </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Closes the current undo grouping. </p>
<dl><dt><b>Poikkeukset:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CPInternalInconsistencyException</em>&nbsp;</td><td>if no undo group is open </td></tr>
  </table>
  </dd>
</dl>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00444">444</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00445"></a>00445 {
<a name="l00446"></a>00446     <span class="keywordflow">if</span> (!_currentGrouping)
<a name="l00447"></a>00447         [<a class="code" href="class_c_p_exception.html" title="Used to implement exception handling (creating &amp;amp; raising).">CPException</a> <span class="keyword">raise</span>:<a class="code" href="_c_p_exception_8j.html#aef6598bfe3855334c5a867d55a8816a8">CPInternalInconsistencyException</a> reason:<span class="stringliteral">&quot;endUndoGrouping. No undo group is currently open.&quot;</span>];
<a name="l00448"></a>00448 
<a name="l00449"></a>00449     var defaultCenter = [<a class="code" href="class_c_p_notification_center.html" title="Sends messages (CPNotification) between objects.">CPNotificationCenter</a> defaultCenter];
<a name="l00450"></a>00450 
<a name="l00451"></a>00451     [defaultCenter postNotificationName:<a class="code" href="_c_p_undo_manager_8j.html#acadaf2cacdbc79e756798193f272588e">CPUndoManagerCheckpointNotification</a>
<a name="l00452"></a>00452                                  <span class="keywordtype">object</span>:<span class="keyword">self</span>];
<a name="l00453"></a>00453 
<a name="l00454"></a>00454     var parent = [_currentGrouping parent];
<a name="l00455"></a>00455     
<a name="l00456"></a>00456     <span class="keywordflow">if</span> (!parent &amp;&amp; [_currentGrouping invocations].length &gt; 0)
<a name="l00457"></a>00457     {
<a name="l00458"></a>00458         [defaultCenter
<a name="l00459"></a>00459             postNotificationName:<a class="code" href="_c_p_undo_manager_8j.html#a7592964b54d78bc3d6b48ab64ecc2a78">CPUndoManagerWillCloseUndoGroupNotification</a>
<a name="l00460"></a>00460                           <span class="keywordtype">object</span>:<span class="keyword">self</span>];
<a name="l00461"></a>00461                               
<a name="l00462"></a>00462         <span class="comment">// Put this group on the redo stack if we are currently undoing, otherwise</span>
<a name="l00463"></a>00463         <span class="comment">// put it on the undo stack.  That way, &quot;undos&quot; become &quot;redos&quot;.</span>
<a name="l00464"></a>00464         var stack = _state === <a class="code" href="_c_p_undo_manager_8j.html#aaad25405c75ea3c461633b915b8580a9">CPUndoManagerUndoing</a> ? _redoStack : _undoStack;
<a name="l00465"></a>00465         
<a name="l00466"></a>00466         stack.push(_currentGrouping);
<a name="l00467"></a>00467     
<a name="l00468"></a>00468         <span class="keywordflow">if</span> (_levelsOfUndo &gt; 0 &amp;&amp; stack.length &gt; _levelsOfUndo)
<a name="l00469"></a>00469             stack.splice(0, 1);        
<a name="l00470"></a>00470     }
<a name="l00471"></a>00471     
<a name="l00472"></a>00472     <span class="comment">// Nested Undo Grouping</span>
<a name="l00473"></a>00473     <span class="keywordflow">else</span>
<a name="l00474"></a>00474     {
<a name="l00475"></a>00475         [parent addInvocationsFromArray:[_currentGrouping invocations]];
<a name="l00476"></a>00476         
<a name="l00477"></a>00477         [_CPUndoGrouping _poolUndoGrouping:_currentGrouping];
<a name="l00478"></a>00478     }
<a name="l00479"></a>00479     
<a name="l00480"></a>00480     _currentGrouping = parent;
<a name="l00481"></a>00481 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4c3a377f09c0cf9e98b0679e680ccaa4"></a><!-- doxytag: member="CPUndoManager::groupingLevel" ref="a4c3a377f09c0cf9e98b0679e680ccaa4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (unsigned) groupingLevel </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of undo/redo groups. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00526">526</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00527"></a>00527 {
<a name="l00528"></a>00528     var grouping = _currentGrouping,
<a name="l00529"></a>00529         level = _currentGrouping != nil;
<a name="l00530"></a>00530     
<a name="l00531"></a>00531     <span class="keywordflow">while</span> (grouping = [grouping parent])
<a name="l00532"></a>00532         ++level;
<a name="l00533"></a>00533     
<a name="l00534"></a>00534     <span class="keywordflow">return</span> level;
<a name="l00535"></a>00535 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abf7c504ba2471ce1e9d89881af690ea8"></a><!-- doxytag: member="CPUndoManager::groupsByEvent" ref="abf7c504ba2471ce1e9d89881af690ea8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) groupsByEvent </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns <code>YES</code> if the manager groups undo operations at every iteration of the run loop. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00501">501</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00502"></a>00502 {
<a name="l00503"></a>00503     <span class="keywordflow">return</span> _groupsByEvent;
<a name="l00504"></a>00504 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5c10e31c699aaad0216d07bfa048ae78"></a><!-- doxytag: member="CPUndoManager::init" ref="a5c10e31c699aaad0216d07bfa048ae78" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) init </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes the undo manager </p>
<dl class="return"><dt><b>Palauttaa:</b></dt><dd>the initialized undo manager </dd></dl>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00193">193</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00194"></a>00194 {
<a name="l00195"></a>00195     <span class="keyword">self</span> = [super <a class="code" href="class_c_p_undo_manager.html#a5c10e31c699aaad0216d07bfa048ae78">init</a>];
<a name="l00196"></a>00196     
<a name="l00197"></a>00197     <span class="keywordflow">if</span> (<span class="keyword">self</span>)
<a name="l00198"></a>00198     {
<a name="l00199"></a>00199         _redoStack = [];
<a name="l00200"></a>00200         _undoStack = [];
<a name="l00201"></a>00201         
<a name="l00202"></a>00202         _state = <a class="code" href="_c_p_undo_manager_8j.html#a6d4c58cc19ea1d126dc40a9458637aa3">CPUndoManagerNormal</a>;
<a name="l00203"></a>00203         
<a name="l00204"></a>00204         [<span class="keyword">self</span> setRunLoopModes:[<a class="code" href="_c_p_run_loop_8j.html#a51e129fa61aa6aef4c036d4762d468ea">CPDefaultRunLoopMode</a>]];
<a name="l00205"></a>00205         [<span class="keyword">self</span> setGroupsByEvent:YES];
<a name="l00206"></a>00206 
<a name="l00207"></a>00207         _undoManagerProxy = [_CPUndoManagerProxy alloc];
<a name="l00208"></a>00208         _undoManagerProxy._undoManager = <span class="keyword">self</span>;
<a name="l00209"></a>00209     }
<a name="l00210"></a>00210     
<a name="l00211"></a>00211     <span class="keywordflow">return</span> <span class="keyword">self</span>;
<a name="l00212"></a>00212 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abe59da4cdc2b929603b6ce0def53cd81"></a><!-- doxytag: member="CPUndoManager::initWithCoder:" ref="abe59da4cdc2b929603b6ce0def53cd81" args="(CPCoder aCoder)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) initWithCoder: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="class_c_p_coder.html">CPCoder</a>)&nbsp;</td>
          <td class="paramname"> <em>aCoder</em></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00748">748</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00748"></a>00748                    :(<a class="code" href="class_c_p_coder.html" title="Defines methods for use when archiving &amp;amp; restoring (enc/decoding).">CPCoder</a>)aCoder
<a name="l00749"></a>00749 {
<a name="l00750"></a>00750     <span class="keyword">self</span> = [super <a class="code" href="class_c_p_undo_manager.html#a5c10e31c699aaad0216d07bfa048ae78">init</a>];
<a name="l00751"></a>00751     
<a name="l00752"></a>00752     <span class="keywordflow">if</span> (<span class="keyword">self</span>)
<a name="l00753"></a>00753     {
<a name="l00754"></a>00754         _redoStack = [aCoder decodeObjectForKey:<a class="code" href="_c_p_undo_manager_8j.html#ac9b814ef3588561040a6e45edf54bebd">CPUndoManagerRedoStackKey</a>];
<a name="l00755"></a>00755         _undoStack = [aCoder decodeObjectForKey:<a class="code" href="_c_p_undo_manager_8j.html#a3d032540fd77975f742e1234fb1c2558">CPUndoManagerUndoStackKey</a>];
<a name="l00756"></a>00756         
<a name="l00757"></a>00757         _levelsOfUndo = [aCoder decodeObjectForKey:<a class="code" href="_c_p_undo_manager_8j.html#a990cbb45694d6247a21e36eab9d1406a">CPUndoManagerLevelsOfUndoKey</a>];
<a name="l00758"></a>00758         _actionName = [aCoder decodeObjectForKey:<a class="code" href="_c_p_undo_manager_8j.html#affeb8cc84ace6412fa6ddb98ea2bdf35">CPUndoManagerActionNameKey</a>];
<a name="l00759"></a>00759         _currentGrouping = [aCoder decodeObjectForKey:<a class="code" href="_c_p_undo_manager_8j.html#a7ca9ea54175879769cf6e551b2f66b79">CPUndoManagerCurrentGroupingKey</a>];
<a name="l00760"></a>00760         
<a name="l00761"></a>00761         _state = <a class="code" href="_c_p_undo_manager_8j.html#a6d4c58cc19ea1d126dc40a9458637aa3">CPUndoManagerNormal</a>;
<a name="l00762"></a>00762         
<a name="l00763"></a>00763         [<span class="keyword">self</span> setRunLoopModes:[aCoder decodeObjectForKey:<a class="code" href="_c_p_undo_manager_8j.html#a6b7ff9743e7e7f389b6c6ff351c19f29">CPUndoManagerRunLoopModesKey</a>]];
<a name="l00764"></a>00764         [<span class="keyword">self</span> setGroupsByEvent:[aCoder decodeBoolForKey:<a class="code" href="_c_p_undo_manager_8j.html#af3d76aeb6f1ac36ec0b1a9b98950d9ff">CPUndoManagerGroupsByEventKey</a>]];
<a name="l00765"></a>00765     }
<a name="l00766"></a>00766     
<a name="l00767"></a>00767     <span class="keywordflow">return</span> <span class="keyword">self</span>;
<a name="l00768"></a>00768 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7eb97b135068c9980eb773d11faaefdf"></a><!-- doxytag: member="CPUndoManager::isRedoing" ref="a7eb97b135068c9980eb773d11faaefdf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) isRedoing </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns <code>YES</code> if the manager is currently performing a redo. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00566">566</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00567"></a>00567 {
<a name="l00568"></a>00568     <span class="keywordflow">return</span> _state === <a class="code" href="_c_p_undo_manager_8j.html#ad5a4e307fcd13b1c8d87de9208c374dc">CPUndoManagerRedoing</a>;
<a name="l00569"></a>00569 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a16aa42115baea4d0f193d86817afccc5"></a><!-- doxytag: member="CPUndoManager::isUndoing" ref="a16aa42115baea4d0f193d86817afccc5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) isUndoing </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns <code>YES</code> if the manager is currently performing an undo. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00558">558</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00559"></a>00559 {
<a name="l00560"></a>00560     <span class="keywordflow">return</span> _state === <a class="code" href="_c_p_undo_manager_8j.html#aaad25405c75ea3c461633b915b8580a9">CPUndoManagerUndoing</a>;
<a name="l00561"></a>00561 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae72531cc6abebfafa8134b8ec47dc09c"></a><!-- doxytag: member="CPUndoManager::isUndoRegistrationEnabled" ref="ae72531cc6abebfafa8134b8ec47dc09c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) isUndoRegistrationEnabled </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns <code>YES</code> if undo registration is enabled. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00549">549</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00550"></a>00550 {
<a name="l00551"></a>00551     <span class="keywordflow">return</span> _disableCount == 0;
<a name="l00552"></a>00552 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac213940733e724fc57f01af5625ca689"></a><!-- doxytag: member="CPUndoManager::observeChangesForKeyPath:ofObject:" ref="ac213940733e724fc57f01af5625ca689" args="(CPString aKeyPath,[ofObject] id anObject)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) observeChangesForKeyPath: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="class_c_p_string.html">CPString</a>)&nbsp;</td>
          <td class="paramname"> <em>aKeyPath</em></td>
        </tr>
        <tr>
          <td class="paramkey">ofObject:</td>
          <td></td>
          <td class="paramtype">(id)&nbsp;</td>
          <td class="paramname"> <em>anObject</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td><td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00711">711</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00711"></a>00711                                 :(<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)aKeyPath ofObject:(<span class="keywordtype">id</span>)anObject
<a name="l00712"></a>00712 {
<a name="l00713"></a>00713     [anObject addObserver:<span class="keyword">self</span>
<a name="l00714"></a>00714               forKeyPath:aKeyPath
<a name="l00715"></a>00715                  options:<a class="code" href="_c_p_key_value_observing_8j.html#a6a56c3925217a460c8919703a2f8b641">CPKeyValueObservingOptionOld</a> | <a class="code" href="_c_p_key_value_observing_8j.html#ae30e675d39ba94f39d2c5344f1958c09">CPKeyValueObservingOptionNew</a>
<a name="l00716"></a>00716                  context:NULL];
<a name="l00717"></a>00717 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1c7233d21b76b099ecef59ad6960732d"></a><!-- doxytag: member="CPUndoManager::observeValueForKeyPath:ofObject:change:context:" ref="a1c7233d21b76b099ecef59ad6960732d" args="(CPString aKeyPath,[ofObject] id anObject,[change] CPDictionary aChange,[context] id aContext)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) observeValueForKeyPath: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="class_c_p_string.html">CPString</a>)&nbsp;</td>
          <td class="paramname"> <em>aKeyPath</em></td>
        </tr>
        <tr>
          <td class="paramkey">ofObject:</td>
          <td></td>
          <td class="paramtype">(id)&nbsp;</td>
          <td class="paramname"> <em>anObject</em></td>
        </tr>
        <tr>
          <td class="paramkey">change:</td>
          <td></td>
          <td class="paramtype">(<a class="el" href="class_c_p_dictionary.html">CPDictionary</a>)&nbsp;</td>
          <td class="paramname"> <em>aChange</em></td>
        </tr>
        <tr>
          <td class="paramkey">context:</td>
          <td></td>
          <td class="paramtype">(id)&nbsp;</td>
          <td class="paramname"> <em>aContext</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td><td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00724">724</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00724"></a>00724                               :(<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)aKeyPath
<a name="l00725"></a>00725                       ofObject:(<span class="keywordtype">id</span>)anObject
<a name="l00726"></a>00726                         change:(<a class="code" href="class_c_p_dictionary.html" title="A mutable key-value pair collection.">CPDictionary</a>)aChange
<a name="l00727"></a>00727                        context:(<span class="keywordtype">id</span>)aContext
<a name="l00728"></a>00728 {
<a name="l00729"></a>00729     [[<span class="keyword">self</span> prepareWithInvocationTarget:anObject]
<a name="l00730"></a>00730         applyChange:[aChange inverseChangeDictionary]
<a name="l00731"></a>00731           toKeyPath:aKeyPath];
<a name="l00732"></a>00732 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afda2099de67bedf8a3e75a8ce128633f"></a><!-- doxytag: member="CPUndoManager::prepareWithInvocationTarget:" ref="afda2099de67bedf8a3e75a8ce128633f" args="(id aTarget)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) prepareWithInvocationTarget: </td>
          <td></td>
          <td class="paramtype">(id)&nbsp;</td>
          <td class="paramname"> <em>aTarget</em></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Prepares the specified target for the undo action. </p>
<dl><dt><b>Parametrit:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>aTarget</em>&nbsp;</td><td>the target to receive the action </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Palauttaa:</b></dt><dd>the undo manager </dd></dl>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00258">258</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00258"></a>00258                                  :(id)aTarget
<a name="l00259"></a>00259 {
<a name="l00260"></a>00260     _preparedTarget = aTarget;
<a name="l00261"></a>00261     
<a name="l00262"></a>00262     <span class="keywordflow">return</span> _undoManagerProxy;
<a name="l00263"></a>00263 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac15a928a1dc50cb5d192bb5dc20af01f"></a><!-- doxytag: member="CPUndoManager::redo" ref="ac15a928a1dc50cb5d192bb5dc20af01f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) redo </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Performs the redo operation using the last grouping on the redo stack. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00371">371</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00372"></a>00372 {
<a name="l00373"></a>00373     <span class="comment">// Don&#39;t do anything if we have no redos.</span>
<a name="l00374"></a>00374     <span class="keywordflow">if</span> ([_redoStack count] &lt;= 0)
<a name="l00375"></a>00375         <span class="keywordflow">return</span>;
<a name="l00376"></a>00376     
<a name="l00377"></a>00377 <span class="comment">/*    if (_state == NSUndoManagerUndoing)</span>
<a name="l00378"></a>00378 <span class="comment">        [NSException raise:NSInternalInconsistencyException</span>
<a name="l00379"></a>00379 <span class="comment">                    format:@&quot;redo called while undoing&quot;];</span>
<a name="l00380"></a>00380 <span class="comment">*/</span>
<a name="l00381"></a>00381 
<a name="l00382"></a>00382     var defaultCenter = [<a class="code" href="class_c_p_notification_center.html" title="Sends messages (CPNotification) between objects.">CPNotificationCenter</a> defaultCenter];
<a name="l00383"></a>00383 
<a name="l00384"></a>00384     [defaultCenter postNotificationName:<a class="code" href="_c_p_undo_manager_8j.html#acadaf2cacdbc79e756798193f272588e">CPUndoManagerCheckpointNotification</a>
<a name="l00385"></a>00385                                  <span class="keywordtype">object</span>:<span class="keyword">self</span>];
<a name="l00386"></a>00386 
<a name="l00387"></a>00387     [defaultCenter postNotificationName:<a class="code" href="_c_p_undo_manager_8j.html#ad2d2af04224ccb9bc6333a64549918ad">CPUndoManagerWillRedoChangeNotification</a>
<a name="l00388"></a>00388                                  <span class="keywordtype">object</span>:<span class="keyword">self</span>];
<a name="l00389"></a>00389     
<a name="l00390"></a>00390     var oldUndoGrouping = _currentGrouping,
<a name="l00391"></a>00391         undoGrouping = _redoStack.pop();
<a name="l00392"></a>00392     
<a name="l00393"></a>00393     _currentGrouping = nil;
<a name="l00394"></a>00394     _state = <a class="code" href="_c_p_undo_manager_8j.html#ad5a4e307fcd13b1c8d87de9208c374dc">CPUndoManagerRedoing</a>;
<a name="l00395"></a>00395 
<a name="l00396"></a>00396     [<span class="keyword">self</span> _beginUndoGrouping];
<a name="l00397"></a>00397     [undoGrouping invoke];
<a name="l00398"></a>00398     [<span class="keyword">self</span> <a class="code" href="class_c_p_undo_manager.html#ac49120debe2177f67b5c822c48f14657">endUndoGrouping</a>];
<a name="l00399"></a>00399     
<a name="l00400"></a>00400     [_CPUndoGrouping _poolUndoGrouping:undoGrouping];
<a name="l00401"></a>00401     
<a name="l00402"></a>00402     _currentGrouping = oldUndoGrouping;
<a name="l00403"></a>00403     _state = <a class="code" href="_c_p_undo_manager_8j.html#a6d4c58cc19ea1d126dc40a9458637aa3">CPUndoManagerNormal</a>;
<a name="l00404"></a>00404 
<a name="l00405"></a>00405     [defaultCenter postNotificationName:<a class="code" href="_c_p_undo_manager_8j.html#a29024e7360f105ca9e89b73ef7876115">CPUndoManagerDidRedoChangeNotification</a> <span class="keywordtype">object</span>:<span class="keyword">self</span>];
<a name="l00406"></a>00406 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a65f6e3df36b2cc2fd462961f68b983ef"></a><!-- doxytag: member="CPUndoManager::redoActionName" ref="a65f6e3df36b2cc2fd462961f68b983ef" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="class_c_p_string.html">CPString</a>) redoActionName </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If the receiver can perform a redo, this method returns the action name previously associated with the top grouping with <code>-setActionName</code>:. This name should identify the action to be redone. </p>
<dl class="return"><dt><b>Palauttaa:</b></dt><dd>the redo action's name, or <code>nil</code> if no there's no redo on the stack. </dd></dl>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00632">632</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00633"></a>00633 {
<a name="l00634"></a>00634     <span class="keywordflow">return</span> [<span class="keyword">self</span> <a class="code" href="class_c_p_undo_manager.html#aa95000c40b5bf973564422aa2c3113a3">canRedo</a>] ? _actionName : nil;
<a name="l00635"></a>00635 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6f7eb271e86b308f8a972d9cd6e84f3d"></a><!-- doxytag: member="CPUndoManager::registerUndoWithTarget:selector:object:" ref="a6f7eb271e86b308f8a972d9cd6e84f3d" args="(id aTarget,[selector] SEL aSelector,[object] id anObject)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) registerUndoWithTarget: </td>
          <td></td>
          <td class="paramtype">(id)&nbsp;</td>
          <td class="paramname"> <em>aTarget</em></td>
        </tr>
        <tr>
          <td class="paramkey">selector:</td>
          <td></td>
          <td class="paramtype">(SEL)&nbsp;</td>
          <td class="paramname"> <em>aSelector</em></td>
        </tr>
        <tr>
          <td class="paramkey">object:</td>
          <td></td>
          <td class="paramtype">(id)&nbsp;</td>
          <td class="paramname"> <em>anObject</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td><td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Registers an undo operation. You invoke this method with the target of the undo action providing the selector which can perform the undo with the provided object. The object is often a dictionary of the identifying the attribute and their values before the change. The invocation will be added to the current grouping. If the registrations have been disabled through <code>-disableUndoRegistration</code>, this method does nothing. </p>
<dl><dt><b>Parametrit:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>aTarget</em>&nbsp;</td><td>the target for the undo invocation </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>aSelector</em>&nbsp;</td><td>the selector for the action message </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>anObject</em>&nbsp;</td><td>the argument for the action message </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Poikkeukset:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CPInternalInconsistencyException</em>&nbsp;</td><td>if no undo group is currently open </td></tr>
  </table>
  </dd>
</dl>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00237">237</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00237"></a>00237                               :(id)aTarget selector:(<span class="keywordtype">SEL</span>)aSelector <span class="keywordtype">object</span>:(id)anObject
<a name="l00238"></a>00238 {
<a name="l00239"></a>00239     <span class="comment">// Don&#39;t do anything if we&#39;re disabled.</span>
<a name="l00240"></a>00240     <span class="keywordflow">if</span> (_disableCount &gt; 0)
<a name="l00241"></a>00241         <span class="keywordflow">return</span>;
<a name="l00242"></a>00242 
<a name="l00243"></a>00243     <span class="comment">//signature = [target methodSignatureForSelector:selector];</span>
<a name="l00244"></a>00244     <span class="comment">// FIXME: we need method signatures.</span>
<a name="l00245"></a>00245     var invocation = [<a class="code" href="class_c_p_invocation.html" title="An object representation of a message.">CPInvocation</a> invocationWithMethodSignature:nil];
<a name="l00246"></a>00246 
<a name="l00247"></a>00247     [invocation setTarget:aTarget];
<a name="l00248"></a>00248     [invocation setSelector:aSelector];
<a name="l00249"></a>00249     [invocation setArgument:anObject atIndex:2];
<a name="l00250"></a>00250 
<a name="l00251"></a>00251     [<span class="keyword">self</span> _addUndoInvocation:invocation];
<a name="l00252"></a>00252 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab88f9690bcd20ec3fa56274d4775f960"></a><!-- doxytag: member="CPUndoManager::removeAllActions" ref="ab88f9690bcd20ec3fa56274d4775f960" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) removeAllActions </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Clears all redo and undo operations and enables undo registrations. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00575">575</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00576"></a>00576 {
<a name="l00577"></a>00577     _redoStack = [];
<a name="l00578"></a>00578     _undoStack = [];
<a name="l00579"></a>00579     _disableCount = 0;
<a name="l00580"></a>00580 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="add722ccb9a10f5fa9e73c8b0dc5695da"></a><!-- doxytag: member="CPUndoManager::removeAllActionsWithTarget:" ref="add722ccb9a10f5fa9e73c8b0dc5695da" args="(id aTarget)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) removeAllActionsWithTarget: </td>
          <td></td>
          <td class="paramtype">(id)&nbsp;</td>
          <td class="paramname"> <em>aTarget</em></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Removes any redo and undo operations that use the specified target. </p>
<dl><dt><b>Parametrit:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>aTarget</em>&nbsp;</td><td>the target for which operations should be removed. </td></tr>
  </table>
  </dd>
</dl>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00586">586</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00586"></a>00586                                   :(id)aTarget
<a name="l00587"></a>00587 {
<a name="l00588"></a>00588     [_currentGrouping removeInvocationsWithTarget:aTarget];
<a name="l00589"></a>00589     
<a name="l00590"></a>00590     var index = _redoStack.length;
<a name="l00591"></a>00591     
<a name="l00592"></a>00592     <span class="keywordflow">while</span> (index--)
<a name="l00593"></a>00593     {
<a name="l00594"></a>00594         var grouping = _redoStack[index];
<a name="l00595"></a>00595         
<a name="l00596"></a>00596         [grouping removeInvocationsWithTarget:aTarget];
<a name="l00597"></a>00597         
<a name="l00598"></a>00598         <span class="keywordflow">if</span> (![grouping invocations].length)
<a name="l00599"></a>00599             _redoStack.splice(index, 1);
<a name="l00600"></a>00600     }
<a name="l00601"></a>00601 
<a name="l00602"></a>00602     index = _undoStack.length;
<a name="l00603"></a>00603     
<a name="l00604"></a>00604     <span class="keywordflow">while</span> (index--)
<a name="l00605"></a>00605     {
<a name="l00606"></a>00606         var grouping = _undoStack[index];
<a name="l00607"></a>00607         
<a name="l00608"></a>00608         [grouping removeInvocationsWithTarget:aTarget];
<a name="l00609"></a>00609         
<a name="l00610"></a>00610         <span class="keywordflow">if</span> (![grouping invocations].length)
<a name="l00611"></a>00611             _undoStack.splice(index, 1);
<a name="l00612"></a>00612     }
<a name="l00613"></a>00613 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a85e28acfaab288d473028367781b24a4"></a><!-- doxytag: member="CPUndoManager::runLoopModes" ref="a85e28acfaab288d473028367781b24a4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="class_c_p_array.html">CPArray</a>) runLoopModes </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the CPRunLoopModes in which the receiver registers the <code>-endUndoGrouping</code> processing when it <code>-groupsByEvent</code>. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00653">653</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00654"></a>00654 {
<a name="l00655"></a>00655     <span class="keywordflow">return</span> _runLoopModes;
<a name="l00656"></a>00656 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a143ea92df9368bb31fd92d993e0ae2c5"></a><!-- doxytag: member="CPUndoManager::setActionName:" ref="a143ea92df9368bb31fd92d993e0ae2c5" args="(CPString anActionName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) setActionName: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="class_c_p_string.html">CPString</a>)&nbsp;</td>
          <td class="paramname"> <em>anActionName</em></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the name associated with the actions of the current group. Typically, you can call this method while registering the actions for the current group. </p>
<dl><dt><b>Parametrit:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>anActionName</em>&nbsp;</td><td>the new name for the current group </td></tr>
  </table>
  </dd>
</dl>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00621">621</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00621"></a>00621                      :(<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)anActionName
<a name="l00622"></a>00622 {
<a name="l00623"></a>00623     _actionName = anActionName;
<a name="l00624"></a>00624 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af1d8252a39f2ec6f0dca17187f15e6d7"></a><!-- doxytag: member="CPUndoManager::setGroupsByEvent:" ref="af1d8252a39f2ec6f0dca17187f15e6d7" args="(BOOL aFlag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) setGroupsByEvent: </td>
          <td></td>
          <td class="paramtype">(BOOL)&nbsp;</td>
          <td class="paramname"> <em>aFlag</em></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets whether the manager should group undo operations at every iteration of the run loop. </p>
<dl><dt><b>Parametrit:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>aFlag</em>&nbsp;</td><td><code>YES</code> groups undo operations </td></tr>
  </table>
  </dd>
</dl>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00510">510</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00510"></a>00510                         :(BOOL)aFlag
<a name="l00511"></a>00511 {
<a name="l00512"></a>00512     aFlag = !!aFlag;
<a name="l00513"></a>00513 
<a name="l00514"></a>00514     <span class="keywordflow">if</span> (_groupsByEvent === aFlag)
<a name="l00515"></a>00515         <span class="keywordflow">return</span>;
<a name="l00516"></a>00516 
<a name="l00517"></a>00517     _groupsByEvent = aFlag;
<a name="l00518"></a>00518 
<a name="l00519"></a>00519     <span class="keywordflow">if</span> (![<span class="keyword">self</span> <a class="code" href="class_c_p_undo_manager.html#abf7c504ba2471ce1e9d89881af690ea8">groupsByEvent</a>])
<a name="l00520"></a>00520         [<span class="keyword">self</span> _unregisterWithRunLoop];
<a name="l00521"></a>00521 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aac89a2ae56ce38c011a677fb9ac36e9f"></a><!-- doxytag: member="CPUndoManager::setRunLoopModes:" ref="aac89a2ae56ce38c011a677fb9ac36e9f" args="(CPArray modes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) setRunLoopModes: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="class_c_p_array.html">CPArray</a>)&nbsp;</td>
          <td class="paramname"> <em>modes</em></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the modes in which the receiver registers the calls with the current run loop to invoke <code>-endUndoGrouping</code> when it <code>-groupsByEvent</code>. This method first cancels any pending registrations in the old modes and registers the invocation in the new modes. </p>
<dl><dt><b>Parametrit:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>modes</em>&nbsp;</td><td>the modes in which calls are registered </td></tr>
  </table>
  </dd>
</dl>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00666">666</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00666"></a>00666                        :(<a class="code" href="class_c_p_array.html" title="A mutable array backed by a JavaScript Array.A mutable array class backed by a JavaScript...">CPArray</a>)modes
<a name="l00667"></a>00667 {
<a name="l00668"></a>00668     _runLoopModes = [modes copy];
<a name="l00669"></a>00669 
<a name="l00670"></a>00670     <span class="keywordflow">if</span> (_registeredWithRunLoop)
<a name="l00671"></a>00671     {
<a name="l00672"></a>00672         [<span class="keyword">self</span> _unregisterWithRunLoop];
<a name="l00673"></a>00673         [<span class="keyword">self</span> _registerWithRunLoop];
<a name="l00674"></a>00674     }
<a name="l00675"></a>00675 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af6d0973dd061f1c69877ddb02d5d8485"></a><!-- doxytag: member="CPUndoManager::stopObservingChangesForKeyPath:ofObject:" ref="af6d0973dd061f1c69877ddb02d5d8485" args="(CPString aKeyPath,[ofObject] id anObject)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) stopObservingChangesForKeyPath: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="class_c_p_string.html">CPString</a>)&nbsp;</td>
          <td class="paramname"> <em>aKeyPath</em></td>
        </tr>
        <tr>
          <td class="paramkey">ofObject:</td>
          <td></td>
          <td class="paramtype">(id)&nbsp;</td>
          <td class="paramname"> <em>anObject</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td><td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00719">719</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00719"></a>00719                                       :(<a class="code" href="class_c_p_string.html" title="An immutable string (collection of characters).">CPString</a>)aKeyPath ofObject:(<span class="keywordtype">id</span>)anObject
<a name="l00720"></a>00720 {
<a name="l00721"></a>00721     [anObject removeObserver:<span class="keyword">self</span> forKeyPath:aKeyPath];
<a name="l00722"></a>00722 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8461cff7f94960cdd44d704236db0d3b"></a><!-- doxytag: member="CPUndoManager::undo" ref="a8461cff7f94960cdd44d704236db0d3b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) undo </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Ends the current grouping, and performs an 'undo' operation. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00328">328</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00329"></a>00329 {
<a name="l00330"></a>00330     <span class="keywordflow">if</span> ([<span class="keyword">self</span> <a class="code" href="class_c_p_undo_manager.html#a4c3a377f09c0cf9e98b0679e680ccaa4">groupingLevel</a>] === 1)
<a name="l00331"></a>00331         [<span class="keyword">self</span> <a class="code" href="class_c_p_undo_manager.html#ac49120debe2177f67b5c822c48f14657">endUndoGrouping</a>];
<a name="l00332"></a>00332 
<a name="l00333"></a>00333     [<span class="keyword">self</span> <a class="code" href="class_c_p_undo_manager.html#aa8caf4c7852b9dac05c707c7b13c53fc">undoNestedGroup</a>];
<a name="l00334"></a>00334 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3841242891fc00a0cf47bf96b5126fa1"></a><!-- doxytag: member="CPUndoManager::undoActionName" ref="a3841242891fc00a0cf47bf96b5126fa1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="class_c_p_string.html">CPString</a>) undoActionName </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If the receiver can perform an undo, this method returns the action name previously associated with the top grouping with <code>-setActionName</code>:. This name should identify the action to be undone. </p>
<dl class="return"><dt><b>Palauttaa:</b></dt><dd>the undo action name or <code>nil</code> if no if there's no undo on the stack. </dd></dl>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00643">643</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00644"></a>00644 {
<a name="l00645"></a>00645     <span class="keywordflow">return</span> [<span class="keyword">self</span> <a class="code" href="class_c_p_undo_manager.html#a5a4d51d2808bbeec3de73bc5f17a4f8e">canUndo</a>] ? _actionName : nil;
<a name="l00646"></a>00646 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa8caf4c7852b9dac05c707c7b13c53fc"></a><!-- doxytag: member="CPUndoManager::undoNestedGroup" ref="aa8caf4c7852b9dac05c707c7b13c53fc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) undoNestedGroup </td>
          <td></td>
          <td class="paramname"></td>
          <td>&nbsp;</td>
          <td><code> [implementation]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Performs an undo on the last undo group. </p>

<p>Määrittely tiedoston <a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a> rivillä <a class="el" href="_c_p_undo_manager_8j_source.html#l00339">339</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00340"></a>00340 { 
<a name="l00341"></a>00341     <span class="keywordflow">if</span> ([_undoStack count] &lt;= 0)
<a name="l00342"></a>00342         <span class="keywordflow">return</span>;
<a name="l00343"></a>00343 
<a name="l00344"></a>00344     var defaultCenter = [<a class="code" href="class_c_p_notification_center.html" title="Sends messages (CPNotification) between objects.">CPNotificationCenter</a> defaultCenter];
<a name="l00345"></a>00345 
<a name="l00346"></a>00346     [defaultCenter postNotificationName:<a class="code" href="_c_p_undo_manager_8j.html#acadaf2cacdbc79e756798193f272588e">CPUndoManagerCheckpointNotification</a>
<a name="l00347"></a>00347                                  <span class="keywordtype">object</span>:<span class="keyword">self</span>];
<a name="l00348"></a>00348 
<a name="l00349"></a>00349     [defaultCenter postNotificationName:<a class="code" href="_c_p_undo_manager_8j.html#ac6a4066be9f9ccbd32f8572f71f23a6c">CPUndoManagerWillUndoChangeNotification</a>
<a name="l00350"></a>00350                                  <span class="keywordtype">object</span>:<span class="keyword">self</span>];
<a name="l00351"></a>00351 
<a name="l00352"></a>00352     var undoGrouping = _undoStack.pop();
<a name="l00353"></a>00353 
<a name="l00354"></a>00354     _state = <a class="code" href="_c_p_undo_manager_8j.html#aaad25405c75ea3c461633b915b8580a9">CPUndoManagerUndoing</a>;
<a name="l00355"></a>00355 
<a name="l00356"></a>00356     [<span class="keyword">self</span> _beginUndoGrouping];
<a name="l00357"></a>00357     [undoGrouping invoke];
<a name="l00358"></a>00358     [<span class="keyword">self</span> <a class="code" href="class_c_p_undo_manager.html#ac49120debe2177f67b5c822c48f14657">endUndoGrouping</a>];
<a name="l00359"></a>00359 
<a name="l00360"></a>00360     [_CPUndoGrouping _poolUndoGrouping:undoGrouping];
<a name="l00361"></a>00361 
<a name="l00362"></a>00362     _state = <a class="code" href="_c_p_undo_manager_8j.html#a6d4c58cc19ea1d126dc40a9458637aa3">CPUndoManagerNormal</a>;
<a name="l00363"></a>00363 
<a name="l00364"></a>00364     [defaultCenter postNotificationName:<a class="code" href="_c_p_undo_manager_8j.html#ab7d81e9affd559bef4b45845a4566e08">CPUndoManagerDidUndoChangeNotification</a>
<a name="l00365"></a>00365                                  <span class="keywordtype">object</span>:<span class="keyword">self</span>];
<a name="l00366"></a>00366 }
</pre></div></p>

</div>
</div>
<hr/>Dokumentaatio tälle luokalle luotiin seuraavasta tiedostosta:<ul>
<li>/Users/raphael/Development/public/ForkedProjects/cappuccino/source/Foundation/<a class="el" href="_c_p_undo_manager_8j_source.html">CPUndoManager.j</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generoinut&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
